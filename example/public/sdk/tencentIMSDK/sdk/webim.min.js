!(function(e, t) {
  e.Long = (function() {
    "use strict";
    function e(e, t, n) {
      (this.low = 0 | e), (this.high = 0 | t), (this.unsigned = !!n);
    }
    function t(e) {
      return !0 === (e && e.__isLong__);
    }
    function n(e, t) {
      var n, o, r;
      return t
        ? ((e >>>= 0),
          (r = 0 <= e && e < 256) && (o = a[e])
            ? o
            : ((n = i(e, (0 | e) < 0 ? -1 : 0, !0)), r && (a[e] = n), n))
        : ((e |= 0),
          (r = -128 <= e && e < 128) && (o = u[e])
            ? o
            : ((n = i(e, e < 0 ? -1 : 0, !1)), r && (u[e] = n), n));
    }
    function o(e, t) {
      if (isNaN(e) || !isFinite(e)) return t ? m : d;
      if (t) {
        if (e < 0) return m;
        if (e >= p) return _;
      } else {
        if (e <= -f) return y;
        if (e + 1 >= f) return M;
      }
      return e < 0 ? o(-e, t).neg() : i(e % l | 0, (e / l) | 0, t);
    }
    function i(t, n, o) {
      return new e(t, n, o);
    }
    function r(e, t, n) {
      if (0 === e.length) throw Error("empty string");
      if (
        "NaN" === e ||
        "Infinity" === e ||
        "+Infinity" === e ||
        "-Infinity" === e
      )
        return d;
      if (
        ("number" == typeof t ? ((n = t), (t = !1)) : (t = !!t),
        (n = n || 10) < 2 || 36 < n)
      )
        throw RangeError("radix");
      var i;
      if ((i = e.indexOf("-")) > 0) throw Error("interior hyphen");
      if (0 === i) return r(e.substring(1), t, n).neg();
      for (var s = o(c(n, 8)), u = d, a = 0; a < e.length; a += 8) {
        var l = Math.min(8, e.length - a),
          p = parseInt(e.substring(a, a + l), n);
        if (l < 8) {
          var f = o(c(n, l));
          u = u.mul(f).add(o(p));
        } else (u = u.mul(s)), (u = u.add(o(p)));
      }
      return (u.unsigned = t), u;
    }
    function s(t) {
      return t instanceof e
        ? t
        : "number" == typeof t
        ? o(t)
        : "string" == typeof t
        ? r(t)
        : i(t.low, t.high, t.unsigned);
    }
    e.prototype.__isLong__,
      Object.defineProperty(e.prototype, "__isLong__", {
        value: !0,
        enumerable: !1,
        configurable: !1,
      }),
      (e.isLong = t);
    var u = {},
      a = {};
    (e.fromInt = n), (e.fromNumber = o), (e.fromBits = i);
    var c = Math.pow;
    (e.fromString = r), (e.fromValue = s);
    var l = 4294967296,
      p = l * l,
      f = p / 2,
      g = n(1 << 24),
      d = n(0);
    e.ZERO = d;
    var m = n(0, !0);
    e.UZERO = m;
    var h = n(1);
    e.ONE = h;
    var I = n(1, !0);
    e.UONE = I;
    var E = n(-1);
    e.NEG_ONE = E;
    var M = i(-1, 2147483647, !1);
    e.MAX_VALUE = M;
    var _ = i(-1, -1, !0);
    e.MAX_UNSIGNED_VALUE = _;
    var y = i(0, -2147483648, !1);
    e.MIN_VALUE = y;
    var T = e.prototype;
    return (
      (T.toInt = function() {
        return this.unsigned ? this.low >>> 0 : this.low;
      }),
      (T.toNumber = function() {
        return this.unsigned
          ? (this.high >>> 0) * l + (this.low >>> 0)
          : this.high * l + (this.low >>> 0);
      }),
      (T.toString = function(e) {
        if ((e = e || 10) < 2 || 36 < e) throw RangeError("radix");
        if (this.isZero()) return "0";
        if (this.isNegative()) {
          if (this.eq(y)) {
            var t = o(e),
              n = this.div(t),
              i = n.mul(t).sub(this);
            return n.toString(e) + i.toInt().toString(e);
          }
          return "-" + this.neg().toString(e);
        }
        for (var r = o(c(e, 6), this.unsigned), s = this, u = ""; ; ) {
          var a = s.div(r),
            l = s.sub(a.mul(r)).toInt() >>> 0,
            p = l.toString(e);
          if (((s = a), s.isZero())) return p + u;
          for (; p.length < 6; ) p = "0" + p;
          u = "" + p + u;
        }
      }),
      (T.getHighBits = function() {
        return this.high;
      }),
      (T.getHighBitsUnsigned = function() {
        return this.high >>> 0;
      }),
      (T.getLowBits = function() {
        return this.low;
      }),
      (T.getLowBitsUnsigned = function() {
        return this.low >>> 0;
      }),
      (T.getNumBitsAbs = function() {
        if (this.isNegative())
          return this.eq(y) ? 64 : this.neg().getNumBitsAbs();
        for (
          var e = 0 != this.high ? this.high : this.low, t = 31;
          t > 0 && 0 == (e & (1 << t));
          t--
        );
        return 0 != this.high ? t + 33 : t + 1;
      }),
      (T.isZero = function() {
        return 0 === this.high && 0 === this.low;
      }),
      (T.isNegative = function() {
        return !this.unsigned && this.high < 0;
      }),
      (T.isPositive = function() {
        return this.unsigned || this.high >= 0;
      }),
      (T.isOdd = function() {
        return 1 == (1 & this.low);
      }),
      (T.isEven = function() {
        return 0 == (1 & this.low);
      }),
      (T.equals = function(e) {
        return (
          t(e) || (e = s(e)),
          (this.unsigned === e.unsigned ||
            this.high >>> 31 != 1 ||
            e.high >>> 31 != 1) &&
            (this.high === e.high && this.low === e.low)
        );
      }),
      (T.eq = T.equals),
      (T.notEquals = function(e) {
        return !this.eq(e);
      }),
      (T.neq = T.notEquals),
      (T.lessThan = function(e) {
        return this.comp(e) < 0;
      }),
      (T.lt = T.lessThan),
      (T.lessThanOrEqual = function(e) {
        return this.comp(e) <= 0;
      }),
      (T.lte = T.lessThanOrEqual),
      (T.greaterThan = function(e) {
        return this.comp(e) > 0;
      }),
      (T.gt = T.greaterThan),
      (T.greaterThanOrEqual = function(e) {
        return this.comp(e) >= 0;
      }),
      (T.gte = T.greaterThanOrEqual),
      (T.compare = function(e) {
        if ((t(e) || (e = s(e)), this.eq(e))) return 0;
        var n = this.isNegative(),
          o = e.isNegative();
        return n && !o
          ? -1
          : !n && o
          ? 1
          : this.unsigned
          ? e.high >>> 0 > this.high >>> 0 ||
            (e.high === this.high && e.low >>> 0 > this.low >>> 0)
            ? -1
            : 1
          : this.sub(e).isNegative()
          ? -1
          : 1;
      }),
      (T.comp = T.compare),
      (T.negate = function() {
        return !this.unsigned && this.eq(y) ? y : this.not().add(h);
      }),
      (T.neg = T.negate),
      (T.add = function(e) {
        t(e) || (e = s(e));
        var n = this.high >>> 16,
          o = 65535 & this.high,
          r = this.low >>> 16,
          u = 65535 & this.low,
          a = e.high >>> 16,
          c = 65535 & e.high,
          l = e.low >>> 16,
          p = 65535 & e.low,
          f = 0,
          g = 0,
          d = 0,
          m = 0;
        return (
          (m += u + p),
          (d += m >>> 16),
          (m &= 65535),
          (d += r + l),
          (g += d >>> 16),
          (d &= 65535),
          (g += o + c),
          (f += g >>> 16),
          (g &= 65535),
          (f += n + a),
          (f &= 65535),
          i((d << 16) | m, (f << 16) | g, this.unsigned)
        );
      }),
      (T.subtract = function(e) {
        return t(e) || (e = s(e)), this.add(e.neg());
      }),
      (T.sub = T.subtract),
      (T.multiply = function(e) {
        if (this.isZero()) return d;
        if ((t(e) || (e = s(e)), e.isZero())) return d;
        if (this.eq(y)) return e.isOdd() ? y : d;
        if (e.eq(y)) return this.isOdd() ? y : d;
        if (this.isNegative())
          return e.isNegative()
            ? this.neg().mul(e.neg())
            : this.neg()
                .mul(e)
                .neg();
        if (e.isNegative()) return this.mul(e.neg()).neg();
        if (this.lt(g) && e.lt(g))
          return o(this.toNumber() * e.toNumber(), this.unsigned);
        var n = this.high >>> 16,
          r = 65535 & this.high,
          u = this.low >>> 16,
          a = 65535 & this.low,
          c = e.high >>> 16,
          l = 65535 & e.high,
          p = e.low >>> 16,
          f = 65535 & e.low,
          m = 0,
          h = 0,
          I = 0,
          E = 0;
        return (
          (E += a * f),
          (I += E >>> 16),
          (E &= 65535),
          (I += u * f),
          (h += I >>> 16),
          (I &= 65535),
          (I += a * p),
          (h += I >>> 16),
          (I &= 65535),
          (h += r * f),
          (m += h >>> 16),
          (h &= 65535),
          (h += u * p),
          (m += h >>> 16),
          (h &= 65535),
          (h += a * l),
          (m += h >>> 16),
          (h &= 65535),
          (m += n * f + r * p + u * l + a * c),
          (m &= 65535),
          i((I << 16) | E, (m << 16) | h, this.unsigned)
        );
      }),
      (T.mul = T.multiply),
      (T.divide = function(e) {
        if ((t(e) || (e = s(e)), e.isZero())) throw Error("division by zero");
        if (this.isZero()) return this.unsigned ? m : d;
        var n, i, r;
        if (this.unsigned) {
          if ((e.unsigned || (e = e.toUnsigned()), e.gt(this))) return m;
          if (e.gt(this.shru(1))) return I;
          r = m;
        } else {
          if (this.eq(y)) {
            if (e.eq(h) || e.eq(E)) return y;
            if (e.eq(y)) return h;
            return (
              (n = this.shr(1)
                .div(e)
                .shl(1)),
              n.eq(d)
                ? e.isNegative()
                  ? h
                  : E
                : ((i = this.sub(e.mul(n))), (r = n.add(i.div(e))))
            );
          }
          if (e.eq(y)) return this.unsigned ? m : d;
          if (this.isNegative())
            return e.isNegative()
              ? this.neg().div(e.neg())
              : this.neg()
                  .div(e)
                  .neg();
          if (e.isNegative()) return this.div(e.neg()).neg();
          r = d;
        }
        for (i = this; i.gte(e); ) {
          n = Math.max(1, Math.floor(i.toNumber() / e.toNumber()));
          for (
            var u = Math.ceil(Math.log(n) / Math.LN2),
              a = u <= 48 ? 1 : c(2, u - 48),
              l = o(n),
              p = l.mul(e);
            p.isNegative() || p.gt(i);

          )
            (n -= a), (l = o(n, this.unsigned)), (p = l.mul(e));
          l.isZero() && (l = h), (r = r.add(l)), (i = i.sub(p));
        }
        return r;
      }),
      (T.div = T.divide),
      (T.modulo = function(e) {
        return t(e) || (e = s(e)), this.sub(this.div(e).mul(e));
      }),
      (T.mod = T.modulo),
      (T.not = function() {
        return i(~this.low, ~this.high, this.unsigned);
      }),
      (T.and = function(e) {
        return (
          t(e) || (e = s(e)),
          i(this.low & e.low, this.high & e.high, this.unsigned)
        );
      }),
      (T.or = function(e) {
        return (
          t(e) || (e = s(e)),
          i(this.low | e.low, this.high | e.high, this.unsigned)
        );
      }),
      (T.xor = function(e) {
        return (
          t(e) || (e = s(e)),
          i(this.low ^ e.low, this.high ^ e.high, this.unsigned)
        );
      }),
      (T.shiftLeft = function(e) {
        return (
          t(e) && (e = e.toInt()),
          0 == (e &= 63)
            ? this
            : e < 32
            ? i(
                this.low << e,
                (this.high << e) | (this.low >>> (32 - e)),
                this.unsigned
              )
            : i(0, this.low << (e - 32), this.unsigned)
        );
      }),
      (T.shl = T.shiftLeft),
      (T.shiftRight = function(e) {
        return (
          t(e) && (e = e.toInt()),
          0 == (e &= 63)
            ? this
            : e < 32
            ? i(
                (this.low >>> e) | (this.high << (32 - e)),
                this.high >> e,
                this.unsigned
              )
            : i(this.high >> (e - 32), this.high >= 0 ? 0 : -1, this.unsigned)
        );
      }),
      (T.shr = T.shiftRight),
      (T.shiftRightUnsigned = function(e) {
        if ((t(e) && (e = e.toInt()), 0 === (e &= 63))) return this;
        var n = this.high;
        if (e < 32) {
          return i((this.low >>> e) | (n << (32 - e)), n >>> e, this.unsigned);
        }
        return 32 === e
          ? i(n, 0, this.unsigned)
          : i(n >>> (e - 32), 0, this.unsigned);
      }),
      (T.shru = T.shiftRightUnsigned),
      (T.toSigned = function() {
        return this.unsigned ? i(this.low, this.high, !1) : this;
      }),
      (T.toUnsigned = function() {
        return this.unsigned ? this : i(this.low, this.high, !0);
      }),
      (T.toBytes = function(e) {
        return e ? this.toBytesLE() : this.toBytesBE();
      }),
      (T.toBytesLE = function() {
        var e = this.high,
          t = this.low;
        return [
          255 & t,
          (t >>> 8) & 255,
          (t >>> 16) & 255,
          (t >>> 24) & 255,
          255 & e,
          (e >>> 8) & 255,
          (e >>> 16) & 255,
          (e >>> 24) & 255,
        ];
      }),
      (T.toBytesBE = function() {
        var e = this.high,
          t = this.low;
        return [
          (e >>> 24) & 255,
          (e >>> 16) & 255,
          (e >>> 8) & 255,
          255 & e,
          (t >>> 24) & 255,
          (t >>> 16) & 255,
          (t >>> 8) & 255,
          255 & t,
        ];
      }),
      e
    );
  })();
})(window),
  "function" != typeof Array.prototype.forEach &&
    (Array.prototype.forEach = function(e) {
      for (var t = 0; t < this.length; t++) e.apply(this, [this[t], t, this]);
    });
var msgCache = {},
  webim = {
    login: function(e, t, n) {},
    syncMsgs: function(e, t) {},
    getC2CHistoryMsgs: function(e, t, n) {},
    syncGroupMsgs: function(e, t, n) {},
    sendMsg: function(e, t, n) {},
    logout: function(e, t) {},
    setAutoRead: function(e, t, n) {},
    getProfilePortrait: function(e, t, n) {},
    setProfilePortrait: function(e, t, n) {},
    applyAddFriend: function(e, t, n) {},
    getPendency: function(e, t, n) {},
    deletePendency: function(e, t, n) {},
    responseFriend: function(e, t, n) {},
    getAllFriend: function(e, t, n) {},
    deleteFriend: function(e, t, n) {},
    addBlackList: function(e, t, n) {},
    getBlackList: function(e, t, n) {},
    deleteBlackList: function(e, t, n) {},
    uploadPic: function(e, t, n) {},
    createGroup: function(e, t, n) {},
    applyJoinGroup: function(e, t, n) {},
    handleApplyJoinGroup: function(e, t, n) {},
    deleteApplyJoinGroupPendency: function(e, t, n) {},
    quitGroup: function(e, t, n) {},
    getGroupPublicInfo: function(e, t, n) {},
    getGroupInfo: function(e, t, n) {},
    modifyGroupBaseInfo: function(e, t, n) {},
    destroyGroup: function(e, t, n) {},
    getJoinedGroupListHigh: function(e, t, n) {},
    getGroupMemberInfo: function(e, t, n) {},
    addGroupMember: function(e, t, n) {},
    modifyGroupMember: function(e, t, n) {},
    forbidSendMsg: function(e, t, n) {},
    deleteGroupMember: function(e, t, n) {},
    getPendencyGroup: function(e, t, n) {},
    getPendencyReport: function(e, t, n) {},
    getPendencyGroupRead: function(e, t, n) {},
    sendCustomGroupNotify: function(e, t, n) {},
    Msg: function(e, t, n, o, i, r, s, u, a) {},
    MsgStore: {
      sessMap: function() {
        return {};
      },
      sessCount: function() {
        return 0;
      },
      sessByTypeId: function(e, t) {
        return {};
      },
      delSessByTypeId: function(e, t) {
        return !0;
      },
      resetCookieAndSyncFlag: function() {},
      downloadMap: {},
    },
  };
!(function(e) {
  var t = { VERSION: "1.7.2", APPID: "537048168", PLAATFORM: "10" },
    n = !0,
    o = {
      FORMAL: {
        COMMON: "https://webim.tim.qq.com",
        PIC: "https://pic.tim.qq.com",
      },
      TEST: {
        COMMON: "https://test.tim.qq.com",
        PIC: "https://pic.tim.qq.com",
      },
    },
    i = {},
    r = !1,
    s = {
      OPEN_IM: "openim",
      GROUP: "group_open_http_svc",
      FRIEND: "sns",
      PROFILE: "profile",
      RECENT_CONTACT: "recentcontact",
      PIC: "openpic",
      BIG_GROUP: "group_open_http_noauth_svc",
      BIG_GROUP_LONG_POLLING: "group_open_long_polling_http_noauth_svc",
      IM_OPEN_STAT: "imopenstat",
      DEL_CHAT: "recentcontact",
      WEB_IM: "webim",
    },
    u = {
      openim: "v4",
      group_open_http_svc: "v4",
      sns: "v4",
      profile: "v4",
      recentcontact: "v4",
      openpic: "v4",
      group_open_http_noauth_svc: "v1",
      group_open_long_polling_http_noauth_svc: "v1",
      imopenstat: "v4",
      webim: "v3",
    },
    a = {
      login: 1,
      pic_up: 3,
      apply_join_group: 9,
      create_group: 10,
      longpolling: 18,
      send_group_msg: 19,
      sendmsg: 20,
    },
    c = { C2C: "C2C", GROUP: "GROUP" },
    l = { C2C: 1, GROUP: 2 },
    p = { C2C: 12e3, GROUP: 8898 },
    f = { OK: "OK", FAIL: "FAIL" },
    g = {
      TEXT: "TIMTextElem",
      FACE: "TIMFaceElem",
      IMAGE: "TIMImageElem",
      CUSTOM: "TIMCustomElem",
      SOUND: "TIMSoundElem",
      FILE: "TIMFileElem",
      LOCATION: "TIMLocationElem",
      GROUP_TIP: "TIMGroupTipElem",
    },
    d = { ORIGIN: 1, LARGE: 2, SMALL: 3 },
    m = { JPG: 1, JPEG: 1, GIF: 2, PNG: 3, BMP: 4, UNKNOWN: 255 },
    h = { RAW_DATA: 0, BASE64_DATA: 1 },
    I = {
      BUSSINESS_ID: "10001",
      AUTH_KEY: "617574686b6579",
      SERVER_IP: "182.140.186.147",
      SOUND_SERVER_DOMAIN: "grouptalk.c2c.qq.com",
    },
    E = { SOUND: 2106, FILE: 2107 },
    M = { IMAGE: 1, FILE: 2, SHORT_VIDEO: 3, SOUND: 4 },
    _ = { APP_VERSION: "2.1", SERVER_VERSION: 1 },
    y = {
      C2C: 1,
      GROUP_COMMON: 3,
      GROUP_TIP: 4,
      GROUP_SYSTEM: 5,
      GROUP_TIP2: 6,
      FRIEND_NOTICE: 7,
      PROFILE_NOTICE: 8,
      C2C_COMMON: 9,
      C2C_EVENT: 10,
    },
    T = { COMMON: 0 },
    C = { READED: 92, KICKEDOUT: 96 },
    A = { COMMON: 0, LOVEMSG: 1, TIP: 2, REDPACKET: 3 },
    S = { REDPACKET: 1, COMMON: 2, LOVEMSG: 3 },
    v = {
      JOIN: 1,
      QUIT: 2,
      KICK: 3,
      SET_ADMIN: 4,
      CANCEL_ADMIN: 5,
      MODIFY_GROUP_INFO: 6,
      MODIFY_MEMBER_INFO: 7,
    },
    O = { FACE_URL: 1, NAME: 2, OWNER: 3, NOTIFICATION: 4, INTRODUCTION: 5 },
    G = {
      JOIN_GROUP_REQUEST: 1,
      JOIN_GROUP_ACCEPT: 2,
      JOIN_GROUP_REFUSE: 3,
      KICK: 4,
      DESTORY: 5,
      CREATE: 6,
      INVITED_JOIN_GROUP_REQUEST: 7,
      QUIT: 8,
      SET_ADMIN: 9,
      CANCEL_ADMIN: 10,
      REVOKE: 11,
      READED: 15,
      CUSTOM: 255,
      INVITED_JOIN_GROUP_REQUEST_AGREE: 12,
    },
    F = {
      FRIEND_ADD: 1,
      FRIEND_DELETE: 2,
      PENDENCY_ADD: 3,
      PENDENCY_DELETE: 4,
      BLACK_LIST_ADD: 5,
      BLACK_LIST_DELETE: 6,
      PENDENCY_REPORT: 7,
      FRIEND_UPDATE: 8,
    },
    N = { PROFILE_MODIFY: 1 },
    R = { OK: 0, SIGNATURE_EXPIRATION: 11 },
    P = { INIT: -1, ON: 0, RECONNECT: 1, OFF: 9999 },
    b = { GROUP_MSG: 1, C2C_MSG: 2, USER_HEAD: 3, GROUP_HEAD: 4 },
    L = { ING: 14, STOP: 15 },
    U = P.INIT,
    w = !1,
    D = 0,
    k = 6e4,
    q = null,
    B = 0,
    x = 0,
    K = 0,
    H = null,
    V = null,
    J = 0,
    z = [],
    Y = null,
    X = null,
    j = {
      sdkAppID: null,
      appIDAt3rd: null,
      accountType: null,
      identifier: null,
      tinyid: null,
      identifierNick: null,
      userSig: null,
      a2: null,
      contentType: "json",
      apn: 1,
    },
    W = {},
    Q = 0,
    Z = {},
    $ = 0,
    ee = [],
    te = [],
    ne = [],
    oe = null,
    ie = { downloadMap: {} },
    re = {
      "[惊讶]": 0,
      "[撇嘴]": 1,
      "[色]": 2,
      "[发呆]": 3,
      "[得意]": 4,
      "[流泪]": 5,
      "[害羞]": 6,
      "[闭嘴]": 7,
      "[睡]": 8,
      "[大哭]": 9,
      "[尴尬]": 10,
      "[发怒]": 11,
      "[调皮]": 12,
      "[龇牙]": 13,
      "[微笑]": 14,
      "[难过]": 15,
      "[酷]": 16,
      "[冷汗]": 17,
      "[抓狂]": 18,
      "[吐]": 19,
      "[偷笑]": 20,
      "[可爱]": 21,
      "[白眼]": 22,
      "[傲慢]": 23,
      "[饿]": 24,
      "[困]": 25,
      "[惊恐]": 26,
      "[流汗]": 27,
      "[憨笑]": 28,
      "[大兵]": 29,
      "[奋斗]": 30,
      "[咒骂]": 31,
      "[疑问]": 32,
      "[嘘]": 33,
      "[晕]": 34,
    },
    se = {},
    ue = new function() {
      (this.formatTimeStamp = function(e, t) {
        if (!e) return 0;
        var n;
        t = t || "yyyy-MM-dd hh:mm:ss";
        var o = new Date(1e3 * e),
          i = {
            "M+": o.getMonth() + 1,
            "d+": o.getDate(),
            "h+": o.getHours(),
            "m+": o.getMinutes(),
            "s+": o.getSeconds(),
          };
        n = /(y+)/.test(t)
          ? t.replace(
              RegExp.$1,
              (o.getFullYear() + "").substr(4 - RegExp.$1.length)
            )
          : t;
        for (var r in i)
          new RegExp("(" + r + ")").test(n) &&
            (n = n.replace(
              RegExp.$1,
              1 == RegExp.$1.length
                ? i[r]
                : ("00" + i[r]).substr(("" + i[r]).length)
            ));
        return n;
      }),
        (this.groupTypeEn2Ch = function(e) {
          var t = null;
          switch (e) {
            case "Public":
              t = "公开群";
              break;
            case "ChatRoom":
              t = "聊天室";
              break;
            case "Private":
              t = "私有群";
              break;
            case "AVChatRoom":
              t = "直播聊天室";
              break;
            default:
              t = e;
          }
          return t;
        }),
        (this.groupTypeCh2En = function(e) {
          var t = null;
          switch (e) {
            case "公开群":
              t = "Public";
              break;
            case "聊天室":
              t = "ChatRoom";
              break;
            case "私有群":
              t = "Private";
              break;
            case "直播聊天室":
              t = "AVChatRoom";
              break;
            default:
              t = e;
          }
          return t;
        }),
        (this.groupRoleEn2Ch = function(e) {
          var t = null;
          switch (e) {
            case "Member":
              t = "成员";
              break;
            case "Admin":
              t = "管理员";
              break;
            case "Owner":
              t = "群主";
              break;
            default:
              t = e;
          }
          return t;
        }),
        (this.groupRoleCh2En = function(e) {
          var t = null;
          switch (e) {
            case "成员":
              t = "Member";
              break;
            case "管理员":
              t = "Admin";
              break;
            case "群主":
              t = "Owner";
              break;
            default:
              t = e;
          }
          return t;
        }),
        (this.groupMsgFlagEn2Ch = function(e) {
          var t = null;
          switch (e) {
            case "AcceptAndNotify":
              t = "接收并提示";
              break;
            case "AcceptNotNotify":
              t = "接收不提示";
              break;
            case "Discard":
              t = "屏蔽";
              break;
            default:
              t = e;
          }
          return t;
        }),
        (this.groupMsgFlagCh2En = function(e) {
          var t = null;
          switch (e) {
            case "接收并提示":
              t = "AcceptAndNotify";
              break;
            case "接收不提示":
              t = "AcceptNotNotify";
              break;
            case "屏蔽":
              t = "Discard";
              break;
            default:
              t = e;
          }
          return t;
        }),
        (this.formatText2Html = function(e) {
          var t = e;
          return (
            t &&
              ((t = this.xssFilter(t)),
              (t = t.replace(/ /g, "&nbsp;")),
              (t = t.replace(/\n/g, "<br/>"))),
            t
          );
        }),
        (this.formatHtml2Text = function(e) {
          var t = e;
          return (
            t &&
              ((t = t.replace(/&nbsp;/g, " ")),
              (t = t.replace(/<br\/>/g, "\n"))),
            t
          );
        }),
        (this.getStrBytes = function(e) {
          if (null == e || void 0 === e) return 0;
          if ("string" != typeof e) return 0;
          var t,
            n,
            o,
            i = 0;
          for (n = 0, o = e.length; n < o; n++)
            (t = e.charCodeAt(n)),
              (i += t <= 127 ? 1 : t <= 2047 ? 2 : t <= 65535 ? 3 : 4);
          return i;
        }),
        (this.xssFilter = function(e) {
          return (
            (e = e.toString()),
            (e = e.replace(/[<]/g, "&lt;")),
            (e = e.replace(/[>]/g, "&gt;")),
            (e = e.replace(/"/g, "&quot;"))
          );
        }),
        (this.trimStr = function(e) {
          return e ? ((e = e.toString()), e.replace(/(^\s*)|(\s*$)/g, "")) : "";
        }),
        (this.validNumber = function(e) {
          return (e = e.toString()), e.match(/(^\d{1,8}$)/g);
        }),
        (this.getReturnError = function(e, t) {
          return (
            t || (t = -100),
            { ActionStatus: f.FAIL, ErrorCode: t, ErrorInfo: e + "[" + t + "]" }
          );
        }),
        (this.setCookie = function(e, t, n, o, i) {
          var r = new Date();
          r.setTime(r.getTime() + 1e3 * n),
            (document.cookie =
              e + "=" + escape(t) + ";expires=" + r.toGMTString());
        }),
        (this.getCookie = function(e) {
          var t = document.cookie.match(
            new RegExp("(^| )" + e + "=([^;]*)(;|$)")
          );
          return null != t ? unescape(t[2]) : null;
        }),
        (this.delCookie = function(e) {
          var t = new Date();
          t.setTime(t.getTime() - 1);
          var n = this.getCookie(e);
          null != n &&
            (document.cookie =
              e + "=" + escape(n) + ";expires=" + t.toGMTString());
        }),
        (this.getQueryString = function(e) {
          var t = new RegExp("(^|&)" + e + "=([^&]*)(&|$)", "i"),
            n = window.location.search.substr(1).match(t);
          return null != n ? unescape(n[2]) : null;
        }),
        (this.isIE = function(e) {
          var t = document.createElement("b");
          return (
            (t.innerHTML = "\x3c!--[if IE " + e + "]><i></i><![endif]--\x3e"),
            1 === t.getElementsByTagName("i").length
          );
        }),
        (this.getBrowserInfo = function() {
          var e = {},
            t = navigator.userAgent.toLowerCase();
          ae.info("navigator.userAgent=" + t);
          var n;
          return (
            (n = t.match(/msie ([\d.]+)/))
              ? (e.ie = n[1])
              : (n = t.match(/firefox\/([\d.]+)/))
              ? (e.firefox = n[1])
              : (n = t.match(/chrome\/([\d.]+)/))
              ? (e.chrome = n[1])
              : (n = t.match(/opera.([\d.]+)/))
              ? (e.opera = n[1])
              : (n = t.match(/version\/([\d.]+).*safari/)) && (e.safari = n[1]),
            e.ie
              ? (t.match(/trident\/(\d)\./) &&
                  6 == t.match(/trident\/(\d)\./)[1] &&
                  (e.ie = 10),
                { type: "ie", ver: e.ie })
              : e.firefox
              ? { type: "firefox", ver: e.firefox }
              : e.chrome
              ? { type: "chrome", ver: e.chrome }
              : e.opera
              ? { type: "opera", ver: e.opera }
              : e.safari
              ? { type: "safari", ver: e.safari }
              : { type: "unknow", ver: -1 }
          );
        }),
        (this.replaceObject = function(e, t) {
          for (var n in t)
            if (e[n])
              if (((t[e[n]] = t[n]), delete t[n], t[e[n]] instanceof Array))
                for (var o = t[e[n]].length, i = 0; i < o; i++)
                  t[e[n]][i] = this.replaceObject(e, t[e[n]][i]);
              else
                "object" == typeof t[e[n]] &&
                  (t[e[n]] = this.replaceObject(e, t[e[n]]));
          return t;
        });
    }(),
    ae = new function() {
      var e = !0;
      (this.setOn = function(t) {
        e = t;
      }),
        (this.getOn = function() {
          return e;
        }),
        (this.error = function(t) {
          try {
            e && console.error(t);
          } catch (e) {}
        }),
        (this.warn = function(t) {
          try {
            e && console.warn(t);
          } catch (e) {}
        }),
        (this.info = function(t) {
          try {
            e && console.info(t);
          } catch (e) {}
        }),
        (this.debug = function(t) {
          try {
            e && console.debug(t);
          } catch (e) {}
        });
    }(),
    ce = function(e) {
      return e || (e = new Date()), Math.round(e.getTime() / 1e3);
    },
    le = function() {
      return $ ? ($ += 1) : ($ = Math.round(1e7 * Math.random())), $;
    },
    pe = function() {
      return Math.round(4294967296 * Math.random());
    },
    fe = function() {
      var e = null;
      if (window.XMLHttpRequest) e = new XMLHttpRequest();
      else
        try {
          e = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (t) {
          try {
            e = new ActiveXObject("Microsoft.XMLHTTP");
          } catch (e) {
            return null;
          }
        }
      return e;
    },
    ge = function(e, t, n, o, i, r, s, u) {
      var a,
        c,
        l = fe();
      if (!l) {
        c = "创建请求失败";
        var a = ue.getReturnError(c, -1);
        return ae.error(c), void (u && u(a));
      }
      Q++,
        (Z[Q] = l),
        l.open(e, t, !0),
        (l.onreadystatechange = function() {
          4 == l.readyState &&
            ((Z[Q] = null),
            200 == l.status
              ? (s && s(l.responseText), (l = null), (D = B = 0))
              : ((l = null),
                setTimeout(function() {
                  var e = ue.getReturnError(
                    "请求服务器失败,请检查你的网络是否正常",
                    -2
                  );
                  r && oe && oe(e), u && u(e);
                }, 16)));
        }),
        l.setRequestHeader("Content-Type", i),
        o || (o = 15e3),
        o &&
          ((l.timeout = o),
          (l.ontimeout = function(e) {
            l = null;
          })),
        l.overrideMimeType,
        l.send(n);
    },
    de = function(e, t, n, o, i, r, s, u) {
      ge(
        e,
        t,
        JSON.stringify(n),
        o,
        i,
        r,
        function(e) {
          var t = null;
          e && (t = JSON.parse(e)), r && oe && oe(t), s && s(t);
        },
        u
      );
    },
    me = function() {
      return j.sdkAppID && j.identifier;
    },
    he = function(e, t) {
      if (!me()) {
        if (t) {
          var n = ue.getReturnError("请登录", -4);
          e && e(n);
        }
        return !1;
      }
      return !0;
    },
    Ie = function() {
      return n;
    },
    Ee = function(e, n, i, r) {
      var a = o;
      (a = Ie() ? o.FORMAL.COMMON : o.TEST.COMMON),
        e == s.PIC && (a = Ie() ? o.FORMAL.PIC : o.TEST.PIC);
      var c =
        a +
        "/" +
        u[e] +
        "/" +
        e +
        "/" +
        n +
        "?websdkappid=" +
        t.APPID +
        "&v=" +
        t.VERSION +
        "&platform=" +
        t.PLAATFORM;
      if (me()) {
        if ("login" == n || "accesslayer" == n)
          c +=
            "&identifier=" +
            encodeURIComponent(j.identifier) +
            "&usersig=" +
            j.userSig;
        else if (j.tinyid && j.a2) c += "&tinyid=" + j.tinyid + "&a2=" + j.a2;
        else if (r)
          return (
            ae.error("tinyid或a2为空[" + e + "][" + n + "]"),
            r(ue.getReturnError("tinyid或a2为空[" + e + "][" + n + "]", -5)),
            !1
          );
        c += "&contenttype=" + j.contentType;
      }
      return (c +=
        "&sdkappid=" +
        j.sdkAppID +
        "&accounttype=" +
        j.accountType +
        "&apn=" +
        j.apn +
        "&reqtime=" +
        ce());
    },
    Me = function(e, t) {
      var n = null;
      return (
        Y && z[0]
          ? (n =
              "https://" +
              I.SOUND_SERVER_DOMAIN +
              "/asn.com/stddownload_common_file?authkey=" +
              Y +
              "&bid=" +
              I.BUSSINESS_ID +
              "&subbid=" +
              j.sdkAppID +
              "&fileid=" +
              e +
              "&filetype=" +
              E.SOUND +
              "&openid=" +
              t +
              "&ver=0")
          : ae.error("拼接语音下载url不报错：ip或者authkey为空"),
        n
      );
    },
    _e = function(e, t, n) {
      var o = null;
      return (
        Y && z[0]
          ? (o =
              "http://" +
              z[0] +
              "/asn.com/stddownload_common_file?authkey=" +
              Y +
              "&bid=" +
              I.BUSSINESS_ID +
              "&subbid=" +
              j.sdkAppID +
              "&fileid=" +
              e +
              "&filetype=" +
              E.FILE +
              "&openid=" +
              t +
              "&ver=0&filename=" +
              encodeURIComponent(n))
          : ae.error("拼接文件下载url不报错：ip或者authkey为空"),
        (ie.downloadMap["uuid_" + e] = o),
        o
      );
    },
    ye = function(e, t, n, o, i, r, s) {
      var u = {
        From_Account: t,
        To_Account: i,
        os_platform: 10,
        Timestamp: ce().toString(),
        Random: pe().toString(),
        request_info: [
          {
            busi_id: r,
            download_flag: o,
            type: s,
            uuid: e,
            version: _.SERVER_VERSION,
            auth_key: Y,
            ip: z[0],
          },
        ],
      };
      Ot(
        u,
        function(e) {
          0 == e.error_code &&
            e.response_info &&
            (ie.downloadMap["uuid_" + u.uuid] = e.response_info.url),
            onAppliedDownloadUrl &&
              onAppliedDownloadUrl({
                uuid: u.uuid,
                url: e.response_info.url,
                maps: ie.downloadMap,
              });
        },
        function(e) {
          ae.error("获取下载地址失败", u.uuid);
        }
      );
    },
    Te = function() {
      for (var e in Z) {
        var t = Z[e];
        t && (t.abort(), (Z[Q] = null));
      }
      (Q = 0), (Z = {});
    },
    Ce = function() {
      Te(),
        (j = {
          sdkAppID: null,
          appIDAt3rd: null,
          accountType: null,
          identifier: null,
          identifierNick: null,
          userSig: null,
          contentType: "json",
          apn: 1,
        }),
        (W = {}),
        ($ = 0),
        (K = 0),
        (H = null),
        (ne = []),
        Lt.clear(),
        bt.clear(),
        (q = null);
    },
    Ae = function(e, t, o, i, r) {
      return (
        Ce(),
        o && (W = o),
        0 == W.isAccessFormalEnv &&
          (ae.error("请切换为正式环境！！！！"), (n = W.isAccessFormalEnv)),
        0 == W.isLogOn && ae.setOn(W.isLogOn),
        !e && r
          ? void r(ue.getReturnError("loginInfo is empty", -6))
          : !e.sdkAppID && r
          ? void r(ue.getReturnError("loginInfo.sdkAppID is empty", -7))
          : !e.accountType && r
          ? void r(ue.getReturnError("loginInfo.accountType is empty", -8))
          : (e.identifier && (j.identifier = e.identifier.toString()),
            e.identifier && !e.userSig && r
              ? void r(ue.getReturnError("loginInfo.userSig is empty", -9))
              : (e.userSig && (j.userSig = e.userSig.toString()),
                (j.sdkAppID = e.sdkAppID),
                (j.accountType = e.accountType),
                void (j.identifier && j.userSig
                  ? ve(function() {
                      Oe(function(e, n) {
                        Lt.init(
                          t,
                          function(t) {
                            i &&
                              ((t.identifierNick = e), (t.headurl = n), i(t));
                          },
                          r
                        );
                      }, r);
                    })
                  : Lt.init(t, i, r))))
      );
    },
    Se = function(e, n, o) {
      if ("longpolling" != e || (60008 != n && 91101 != n)) {
        var i = a[e];
        if (i) {
          var r = ce(),
            s = null,
            u = { Code: n, ErrMsg: o };
          if (
            (j.a2
              ? (s = j.a2.substring(0, 10) + "_" + r + "_" + pe())
              : j.userSig &&
                (s = j.userSig.substring(0, 10) + "_" + r + "_" + pe()),
            s)
          ) {
            var c = {
              UniqKey: s,
              EventId: i,
              ReportTime: r,
              MsgCmdErrorCode: u,
            };
            if ("login" == e) {
              var l = [];
              l.push(c);
              St(
                { EvtItems: l, MainVersion: t.VERSION, Version: "0" },
                function(e) {
                  l = null;
                },
                function(e) {
                  l = null;
                }
              );
            } else if ((ne.push(c), ne.length >= 20)) {
              var p = { EvtItems: ne, MainVersion: t.VERSION, Version: "0" };
              St(
                p,
                function(e) {
                  ne = [];
                },
                function(e) {
                  ne = [];
                }
              );
            }
          }
        }
      }
    },
    ve = function(e) {
      Gt.apiCall(
        s.WEB_IM,
        "accesslayer",
        {},
        function(t) {
          0 === t.ErrorCode &&
            1 === t.WebImAccessLayer &&
            (o.FORMAL.COMMON = "https://events.tim.qq.com"),
            e();
        },
        function() {
          e();
        }
      );
    },
    Oe = function(e, t) {
      Gt.apiCall(
        s.OPEN_IM,
        "login",
        { State: "Online" },
        function(n) {
          if (n.TinyId) j.tinyid = n.TinyId;
          else if (t) return void t(ue.getReturnError("TinyId is empty", -10));
          if (n.A2Key) j.a2 = n.A2Key;
          else if (t) return void t(ue.getReturnError("A2Key is empty", -11));
          var o = ["Tag_Profile_IM_Nick", "Tag_Profile_IM_Image"],
            i = {
              From_Account: j.identifier,
              To_Account: [j.identifier],
              LastStandardSequence: 0,
              TagList: o,
            };
          It(
            i,
            function(t) {
              var n, o;
              if (t.UserProfileItem && t.UserProfileItem.length > 0)
                for (var i in t.UserProfileItem)
                  for (var r in t.UserProfileItem[i].ProfileItem)
                    switch (t.UserProfileItem[i].ProfileItem[r].Tag) {
                      case "Tag_Profile_IM_Nick":
                        (n = t.UserProfileItem[i].ProfileItem[r].Value),
                          n && (j.identifierNick = n);
                        break;
                      case "Tag_Profile_IM_Image":
                        (o = t.UserProfileItem[i].ProfileItem[r].Value),
                          o && (j.headurl = o);
                    }
              e && e(j.identifierNick, j.headurl);
            },
            t
          );
        },
        t
      );
    },
    Ge = function(e, t, n) {
      if (!he(n, !1))
        return (
          Ce(),
          void (
            t &&
            t({ ActionStatus: f.OK, ErrorCode: 0, ErrorInfo: "logout success" })
          )
        );
      "all" == e
        ? Gt.apiCall(
            s.OPEN_IM,
            "logout",
            {},
            function(e) {
              Ce(), t && t(e);
            },
            n
          )
        : Gt.apiCall(
            s.OPEN_IM,
            "longpollinglogout",
            { LongPollingId: q },
            function(e) {
              Ce(), t && t(e);
            },
            n
          );
    },
    Fe = function(e, t, n) {
      if (he(n, !0)) {
        var o = null;
        switch (e.sess.type()) {
          case c.C2C:
            o = {
              From_Account: j.identifier,
              To_Account: e.sess.id().toString(),
              MsgTimeStamp: e.time,
              MsgSeq: e.seq,
              MsgRandom: e.random,
              MsgBody: [],
              OfflinePushInfo: e.offlinePushInfo,
            };
            break;
          case c.GROUP:
            var i = e.getSubType();
            switch (
              ((o = {
                GroupId: e.sess.id().toString(),
                From_Account: j.identifier,
                Random: e.random,
                MsgBody: [],
              }),
              i)
            ) {
              case A.COMMON:
                o.MsgPriority = "COMMON";
                break;
              case A.REDPACKET:
                o.MsgPriority = "REDPACKET";
                break;
              case A.LOVEMSG:
                o.MsgPriority = "LOVEMSG";
                break;
              case A.TIP:
                ae.error("不能主动发送群提示消息,subType=" + i);
                break;
              default:
                return void ae.error(
                  "发送群消息时，出现未知子消息类型：subType=" + i
                );
            }
        }
        for (var r in e.elems) {
          var u = e.elems[r],
            a = null,
            l = u.type;
          switch (l) {
            case g.TEXT:
              a = { Text: u.content.text };
              break;
            case g.FACE:
              a = { Index: u.content.index, Data: u.content.data };
              break;
            case g.IMAGE:
              var p = [];
              for (var f in u.content.ImageInfoArray)
                p.push({
                  Type: u.content.ImageInfoArray[f].type,
                  Size: u.content.ImageInfoArray[f].size,
                  Width: u.content.ImageInfoArray[f].width,
                  Height: u.content.ImageInfoArray[f].height,
                  URL: u.content.ImageInfoArray[f].url,
                });
              a = {
                ImageFormat: u.content.ImageFormat,
                UUID: u.content.UUID,
                ImageInfoArray: p,
              };
              break;
            case g.SOUND:
              ae.warn("web端暂不支持发送语音消息");
              continue;
            case g.LOCATION:
              ae.warn("web端暂不支持发送地理位置消息");
              continue;
            case g.FILE:
              a = {
                UUID: u.content.uuid,
                FileName: u.content.name,
                FileSize: u.content.size,
                DownloadFlag: u.content.downFlag,
              };
              break;
            case g.CUSTOM:
              (a = {
                Data: u.content.data,
                Desc: u.content.desc,
                Ext: u.content.ext,
              }),
                (l = g.CUSTOM);
              break;
            default:
              ae.warn("web端暂不支持发送" + u.type + "消息");
              continue;
          }
          e.PushInfoBoolean && (o.OfflinePushInfo = e.PushInfo),
            o.MsgBody.push({ MsgType: l, MsgContent: a });
        }
        e.sess.type() == c.C2C
          ? Gt.apiCall(s.OPEN_IM, "sendmsg", o, t, n)
          : e.sess.type() == c.GROUP &&
            Gt.apiCall(s.GROUP, "send_group_msg", o, t, n);
      }
    },
    Ne = function(e, t, o) {
      (n || "undefined" == typeof stopPolling || 1 != stopPolling) &&
        he(o, !0) &&
        Gt.apiCall(s.OPEN_IM, "longpolling", e, t, o, k, !0);
    },
    Re = function(e, t, n, o) {
      Gt.apiCall(s.BIG_GROUP_LONG_POLLING, "get_msg", e, t, n, o);
    },
    Pe = function(e, t, n, o) {
      he(o, !0) &&
        Gt.apiCall(
          s.OPEN_IM,
          "getmsg",
          { Cookie: e, SyncFlag: t },
          function(e) {
            if (e.MsgList && e.MsgList.length)
              for (var t in e.MsgList) ee.push(e.MsgList[t]);
            1 == e.SyncFlag
              ? Pe(e.Cookie, e.SyncFlag, n, o)
              : ((e.MsgList = ee), (ee = []), n && n(e));
          },
          o
        );
    },
    be = function(e, t, n, o) {
      if (he(o, !0)) {
        var i = [];
        for (var r in t) {
          var u = {
            To_Account: t[r].toAccount,
            LastedMsgTime: t[r].lastedMsgTime,
          };
          i.push(u);
        }
        Gt.apiCall(
          s.OPEN_IM,
          "msgreaded",
          { C2CMsgReaded: { Cookie: e, C2CMsgReadedItem: i } },
          n,
          o
        );
      }
    },
    Le = function(e, t, n) {
      he(n, !0) && Gt.apiCall(s.OPEN_IM, "deletemsg", e, t, n);
    },
    Ue = function(e, t, n) {
      he(n, !0) &&
        Gt.apiCall(
          s.OPEN_IM,
          "getroammsg",
          e,
          function(o) {
            var i = e.MaxCnt,
              r = o.Complete,
              s = o.MaxCnt,
              u = o.MsgKey,
              a = o.LastMsgTime;
            if (o.MsgList && o.MsgList.length)
              for (var c in o.MsgList) te.push(o.MsgList[c]);
            var l = null;
            0 == r &&
              s < i &&
              (l = {
                Peer_Account: e.Peer_Account,
                MaxCnt: i - s,
                LastMsgTime: a,
                MsgKey: u,
              }),
              l ? Ue(l, t, n) : ((o.MsgList = te), (te = []), t && t(o));
          },
          n
        );
    },
    we = function(e, t, n) {
      if (he(n, !0)) {
        for (
          var o = { Type: e.Type, Name: e.Name }, i = [], r = 0;
          r < e.MemberList.length;
          r++
        )
          i.push({ Member_Account: e.MemberList[r] });
        (o.MemberList = i),
          e.GroupId && (o.GroupId = e.GroupId),
          e.Owner_Account && (o.Owner_Account = e.Owner_Account),
          e.Introduction && (o.Introduction = e.Introduction),
          e.Notification && (o.Notification = e.Notification),
          e.MaxMemberCount && (o.MaxMemberCount = e.MaxMemberCount),
          e.ApplyJoinOption && (o.ApplyJoinOption = e.ApplyJoinOption),
          e.AppDefinedData && (o.AppDefinedData = e.AppDefinedData),
          e.FaceUrl && (o.FaceUrl = e.FaceUrl),
          Gt.apiCall(s.GROUP, "create_group", o, t, n);
      }
    },
    De = function(e, t, n) {
      he(n, !0) && Gt.apiCall(s.GROUP, "create_group", e, t, n);
    },
    ke = function(e, t, n) {
      he(n, !0) && Gt.apiCall(s.GROUP, "modify_group_base_info", e, t, n);
    },
    qe = function(e, t, n) {
      he(n, !0) &&
        ((e.GroupId = String(e.GroupId)),
        Gt.apiCall(
          s.GROUP,
          "apply_join_group",
          {
            GroupId: e.GroupId,
            ApplyMsg: e.ApplyMsg,
            UserDefinedField: e.UserDefinedField,
          },
          t,
          n
        ));
    },
    Be = function(e, t, n) {
      e.GroupId = String(e.GroupId);
      var o;
      if (
        ((o = he(n, !1) ? s.GROUP : s.BIG_GROUP),
        Lt.checkBigGroupLongPollingOn(e.GroupId))
      )
        return void (
          n &&
          n(
            ue.getReturnError(
              "Join Group failed; You have already been in this group, you have to quit group before you rejoin",
              10013
            )
          )
        );
      Gt.apiCall(
        o,
        "apply_join_group",
        {
          GroupId: e.GroupId,
          ApplyMsg: e.ApplyMsg,
          UserDefinedField: e.UserDefinedField,
        },
        function(o) {
          if (o.JoinedStatus && "JoinedSuccess" == o.JoinedStatus) {
            if (!o.LongPollingKey)
              return void (
                n &&
                n(
                  ue.getReturnError(
                    "Join Group succeed; But the type of group is not AVChatRoom: groupid=" +
                      e.GroupId,
                    -12
                  )
                )
              );
            Lt.setBigGroupLongPollingOn(!0),
              Lt.setBigGroupLongPollingKey(e.GroupId, o.LongPollingKey),
              Lt.setBigGroupLongPollingMsgMap(e.GroupId, 0),
              Lt.bigGroupLongPolling(e.GroupId);
          }
          t && t(o);
        },
        function(e) {
          n && n(e);
        }
      );
    },
    xe = function(e, t, n) {
      he(n, !0) &&
        Gt.apiCall(
          s.GROUP,
          "handle_apply_join_group",
          {
            GroupId: e.GroupId,
            Applicant_Account: e.Applicant_Account,
            HandleMsg: e.HandleMsg,
            Authentication: e.Authentication,
            MsgKey: e.MsgKey,
            ApprovalMsg: e.ApprovalMsg,
            UserDefinedField: e.UserDefinedField,
          },
          t,
          function(e) {
            if (10024 == e.ErrorCode) {
              if (t) {
                var o = {
                  ActionStatus: f.OK,
                  ErrorCode: 0,
                  ErrorInfo: "该申请已经被处理过",
                };
                t(o);
              }
            } else n && n(e);
          }
        );
    },
    Ke = function(e, t, n) {
      he(n, !0) &&
        Gt.apiCall(
          s.GROUP,
          "get_pendency",
          {
            StartTime: e.StartTime,
            Limit: e.Limit,
            Handle_Account: j.identifier,
          },
          t,
          function(e) {}
        );
    },
    He = function(e, t, n) {
      he(n, !0) &&
        Gt.apiCall(
          s.GROUP,
          "report_pendency",
          { ReportTime: e.ReportTime, From_Account: j.identifier },
          t,
          function(e) {}
        );
    },
    Ve = function(e, t, n) {
      he(n, !0) &&
        Gt.apiCall(
          s.GROUP,
          "handle_invite_join_group",
          {
            GroupId: e.GroupId,
            Inviter_Account: e.Inviter_Account,
            HandleMsg: e.HandleMsg,
            Authentication: e.Authentication,
            MsgKey: e.MsgKey,
            ApprovalMsg: e.ApprovalMsg,
            UserDefinedField: e.UserDefinedField,
          },
          t,
          function(e) {}
        );
    },
    Je = function(e, t, n) {
      he(n, !0) &&
        Gt.apiCall(s.GROUP, "quit_group", { GroupId: e.GroupId }, t, n);
    },
    ze = function(e, t, n) {
      var o;
      (o = he(n, !1) ? s.GROUP : s.BIG_GROUP),
        Lt.resetBigGroupLongPollingInfo(e.GroupId),
        Gt.apiCall(
          o,
          "quit_group",
          { GroupId: e.GroupId },
          function(n) {
            bt.delSessByTypeId(c.GROUP, e.GroupId), t && t(n);
          },
          n
        );
    },
    Ye = function(e, t, n) {
      Gt.apiCall(s.GROUP, "search_group", e, t, n);
    },
    Xe = function(e, t, n) {
      he(n, !0) &&
        Gt.apiCall(
          s.GROUP,
          "get_group_public_info",
          {
            GroupIdList: e.GroupIdList,
            ResponseFilter: {
              GroupBasePublicInfoFilter: e.GroupBasePublicInfoFilter,
            },
          },
          function(e) {
            if (((e.ErrorInfo = ""), e.GroupInfo))
              for (var o in e.GroupInfo) {
                var i = e.GroupInfo[o].ErrorCode;
                i > 0 &&
                  ((e.ActionStatus = f.FAIL),
                  (e.GroupInfo[o].ErrorInfo =
                    "[" + i + "]" + e.GroupInfo[o].ErrorInfo),
                  (e.ErrorInfo += e.GroupInfo[o].ErrorInfo + "\n"));
              }
            e.ActionStatus == f.FAIL ? n && n(e) : t && t(e);
          },
          n
        );
    },
    je = function(e, t, n) {
      if (he(n, !0)) {
        var o = {
          GroupIdList: e.GroupIdList,
          ResponseFilter: {
            GroupBaseInfoFilter: e.GroupBaseInfoFilter,
            MemberInfoFilter: e.MemberInfoFilter,
          },
        };
        e.AppDefinedDataFilter_Group &&
          (o.ResponseFilter.AppDefinedDataFilter_Group =
            e.AppDefinedDataFilter_Group),
          e.AppDefinedDataFilter_GroupMember &&
            (o.ResponseFilter.AppDefinedDataFilter_GroupMember =
              e.AppDefinedDataFilter_GroupMember),
          Gt.apiCall(s.GROUP, "get_group_info", o, t, n);
      }
    },
    We = function(e, t, n) {
      he(n, !0) &&
        Gt.apiCall(
          s.GROUP,
          "get_group_member_info",
          {
            GroupId: e.GroupId,
            Offset: e.Offset,
            Limit: e.Limit,
            MemberInfoFilter: e.MemberInfoFilter,
            MemberRoleFilter: e.MemberRoleFilter,
            AppDefinedDataFilter_GroupMember:
              e.AppDefinedDataFilter_GroupMember,
          },
          t,
          n
        );
    },
    Qe = function(e, t, n) {
      he(n, !0) &&
        Gt.apiCall(
          s.GROUP,
          "add_group_member",
          { GroupId: e.GroupId, Silence: e.Silence, MemberList: e.MemberList },
          t,
          n
        );
    },
    Ze = function(e, t, n) {
      if (he(n, !0)) {
        var o = {};
        e.GroupId && (o.GroupId = e.GroupId),
          e.Member_Account && (o.Member_Account = e.Member_Account),
          e.Role && (o.Role = e.Role),
          e.MsgFlag && (o.MsgFlag = e.MsgFlag),
          e.ShutUpTime && (o.ShutUpTime = e.ShutUpTime),
          e.NameCard && (o.NameCard = e.NameCard),
          e.AppMemberDefinedData &&
            (o.AppMemberDefinedData = e.AppMemberDefinedData),
          Gt.apiCall(s.GROUP, "modify_group_member_info", o, t, n);
      }
    },
    $e = function(e, t, n) {
      he(n, !0) &&
        Gt.apiCall(
          s.GROUP,
          "delete_group_member",
          {
            GroupId: e.GroupId,
            Silence: e.Silence,
            MemberToDel_Account: e.MemberToDel_Account,
            Reason: e.Reason,
          },
          t,
          n
        );
    },
    et = function(e, t, n) {
      he(n, !0) &&
        Gt.apiCall(s.GROUP, "destroy_group", { GroupId: e.GroupId }, t, n);
    },
    tt = function(e, t, n) {
      he(n, !0) && Gt.apiCall(s.GROUP, "change_group_owner", e, t, n);
    },
    nt = function(e, t, n) {
      he(n, !0) &&
        Gt.apiCall(
          s.GROUP,
          "get_joined_group_list",
          {
            Member_Account: e.Member_Account,
            Limit: e.Limit,
            Offset: e.Offset,
            GroupType: e.GroupType,
            ResponseFilter: {
              GroupBaseInfoFilter: e.GroupBaseInfoFilter,
              SelfInfoFilter: e.SelfInfoFilter,
            },
          },
          t,
          n
        );
    },
    ot = function(e, t, n) {
      he(n, !0) &&
        Gt.apiCall(
          s.GROUP,
          "get_role_in_group",
          { GroupId: e.GroupId, User_Account: e.User_Account },
          t,
          n
        );
    },
    it = function(e, t, n) {
      he(n, !0) &&
        Gt.apiCall(
          s.GROUP,
          "forbid_send_msg",
          {
            GroupId: e.GroupId,
            Members_Account: e.Members_Account,
            ShutUpTime: e.ShutUpTime,
          },
          t,
          n
        );
    },
    rt = function(e, t, n) {
      he(n, !0) &&
        Gt.apiCall(s.GROUP, "send_group_system_notification", e, t, n);
    },
    st = function(e, t, n) {
      he(n, !0) &&
        Gt.apiCall(
          s.GROUP,
          "group_msg_get",
          {
            GroupId: e.GroupId,
            ReqMsgSeq: e.ReqMsgSeq,
            ReqMsgNumber: e.ReqMsgNumber,
          },
          t,
          n
        );
    },
    ut = function(e, t, n) {
      he(n, !0) &&
        Gt.apiCall(
          s.GROUP,
          "msg_read_report",
          { GroupId: e.GroupId, MsgReadedSeq: e.MsgReadedSeq },
          t,
          n
        );
    },
    at = function(e) {
      var t = [];
      if (
        (e.Fail_Account && e.Fail_Account.length && (t = e.Fail_Account),
        e.Invalid_Account && e.Invalid_Account.length)
      )
        for (var n in e.Invalid_Account) t.push(e.Invalid_Account[n]);
      if (t.length) {
        (e.ActionStatus = f.FAIL), (e.ErrorCode = 99999), (e.ErrorInfo = "");
        for (var o in t) {
          var i = t[o];
          for (var r in e.ResultItem)
            if (e.ResultItem[r].To_Account == i) {
              var s = e.ResultItem[r].ResultCode;
              (e.ResultItem[r].ResultInfo =
                "[" + s + "]" + e.ResultItem[r].ResultInfo),
                (e.ErrorInfo += e.ResultItem[r].ResultInfo + "\n");
              break;
            }
        }
      }
      return e;
    },
    ct = function(e, t, n) {
      he(n, !0) &&
        Gt.apiCall(
          s.FRIEND,
          "friend_add",
          { From_Account: j.identifier, AddFriendItem: e.AddFriendItem },
          function(e) {
            var o = at(e);
            o.ActionStatus == f.FAIL ? n && n(o) : t && t(o);
          },
          n
        );
    },
    lt = function(e, t, n) {
      he(n, !0) &&
        Gt.apiCall(
          s.FRIEND,
          "friend_delete",
          {
            From_Account: j.identifier,
            To_Account: e.To_Account,
            DeleteType: e.DeleteType,
          },
          function(e) {
            var o = at(e);
            o.ActionStatus == f.FAIL ? n && n(o) : t && t(o);
          },
          n
        );
    },
    pt = function(e, t, n) {
      he(n, !0) &&
        (1 == e.chatType
          ? Gt.apiCall(
              s.DEL_CHAT,
              "delete",
              {
                From_Account: j.identifier,
                Type: e.chatType,
                To_Account: e.To_Account,
              },
              t,
              n
            )
          : Gt.apiCall(
              s.DEL_CHAT,
              "delete",
              {
                From_Account: j.identifier,
                Type: e.chatType,
                ToGroupid: e.To_Account,
              },
              t,
              n
            ));
    },
    ft = function(e, t, n) {
      he(n, !0) &&
        Gt.apiCall(
          s.FRIEND,
          "pendency_get",
          {
            From_Account: j.identifier,
            PendencyType: e.PendencyType,
            StartTime: e.StartTime,
            MaxLimited: e.MaxLimited,
            LastSequence: e.LastSequence,
          },
          t,
          n
        );
    },
    gt = function(e, t, n) {
      he(n, !0) &&
        Gt.apiCall(
          s.FRIEND,
          "PendencyReport",
          {
            From_Account: j.identifier,
            LatestPendencyTimeStamp: e.LatestPendencyTimeStamp,
          },
          t,
          n
        );
    },
    dt = function(e, t, n) {
      he(n, !0) &&
        Gt.apiCall(
          s.FRIEND,
          "pendency_delete",
          {
            From_Account: j.identifier,
            PendencyType: e.PendencyType,
            To_Account: e.To_Account,
          },
          function(e) {
            var o = at(e);
            o.ActionStatus == f.FAIL ? n && n(o) : t && t(o);
          },
          n
        );
    },
    mt = function(e, t, n) {
      he(n, !0) &&
        Gt.apiCall(
          s.FRIEND,
          "friend_response",
          {
            From_Account: j.identifier,
            ResponseFriendItem: e.ResponseFriendItem,
          },
          function(e) {
            var o = at(e);
            o.ActionStatus == f.FAIL ? n && n(o) : t && t(o);
          },
          n
        );
    },
    ht = function(e, t, n) {
      he(n, !0) &&
        Gt.apiCall(
          s.FRIEND,
          "friend_get_all",
          {
            From_Account: j.identifier,
            TimeStamp: e.TimeStamp,
            StartIndex: e.StartIndex,
            GetCount: e.GetCount,
            LastStandardSequence: e.LastStandardSequence,
            TagList: e.TagList,
          },
          t,
          n
        );
    },
    It = function(e, t, n) {
      e.To_Account.length > 100 &&
        ((e.To_Account.length = 100),
        ae.error("获取用户资料人数不能超过100人")),
        he(n, !0) &&
          Gt.apiCall(
            s.PROFILE,
            "portrait_get",
            {
              From_Account: j.identifier,
              To_Account: e.To_Account,
              TagList: e.TagList,
            },
            function(e) {
              var o = [];
              if (
                (e.Fail_Account &&
                  e.Fail_Account.length &&
                  (o = e.Fail_Account),
                e.Invalid_Account && e.Invalid_Account.length)
              )
                for (var i in e.Invalid_Account) o.push(e.Invalid_Account[i]);
              if (o.length) {
                (e.ActionStatus = f.FAIL),
                  (e.ErrorCode = 99999),
                  (e.ErrorInfo = "");
                for (var r in o) {
                  var s = o[r];
                  for (var u in e.UserProfileItem)
                    if (e.UserProfileItem[u].To_Account == s) {
                      var a = e.UserProfileItem[u].ResultCode;
                      (e.UserProfileItem[u].ResultInfo =
                        "[" + a + "]" + e.UserProfileItem[u].ResultInfo),
                        (e.ErrorInfo +=
                          "账号:" +
                          s +
                          "," +
                          e.UserProfileItem[u].ResultInfo +
                          "\n");
                      break;
                    }
                }
              }
              e.ActionStatus == f.FAIL ? n && n(e) : t && t(e);
            },
            n
          );
    },
    Et = function(e, t, n) {
      he(n, !0) &&
        Gt.apiCall(
          s.PROFILE,
          "portrait_set",
          { From_Account: j.identifier, ProfileItem: e.ProfileItem },
          function(n) {
            for (var o in e.ProfileItem) {
              var i = e.ProfileItem[o];
              if ("Tag_Profile_IM_Nick" == i.Tag) {
                j.identifierNick = i.Value;
                break;
              }
            }
            t && t(n);
          },
          n
        );
    },
    Mt = function(e, t, n) {
      he(n, !0) &&
        Gt.apiCall(
          s.FRIEND,
          "black_list_add",
          { From_Account: j.identifier, To_Account: e.To_Account },
          function(e) {
            var o = at(e);
            o.ActionStatus == f.FAIL ? n && n(o) : t && t(o);
          },
          n
        );
    },
    _t = function(e, t, n) {
      he(n, !0) &&
        Gt.apiCall(
          s.FRIEND,
          "black_list_delete",
          { From_Account: j.identifier, To_Account: e.To_Account },
          function(e) {
            var o = at(e);
            o.ActionStatus == f.FAIL ? n && n(o) : t && t(o);
          },
          n
        );
    },
    yt = function(e, t, n) {
      he(n, !0) &&
        Gt.apiCall(
          s.FRIEND,
          "black_list_get",
          {
            From_Account: j.identifier,
            StartIndex: e.StartIndex,
            MaxLimited: e.MaxLimited,
            LastSequence: e.LastSequence,
          },
          t,
          n
        );
    },
    Tt = function(e, t, n) {
      he(n, !0) &&
        Gt.apiCall(
          s.RECENT_CONTACT,
          "get",
          { From_Account: j.identifier, Count: e.Count },
          t,
          n
        );
    },
    Ct = function(e, t, n) {
      if (he(n, !0)) {
        var o;
        (o = Ie() ? "pic_up" : "pic_up_test"),
          Gt.apiCall(
            s.PIC,
            o,
            {
              App_Version: _.APP_VERSION,
              From_Account: j.identifier,
              To_Account: e.To_Account,
              Seq: e.Seq,
              Timestamp: e.Timestamp,
              Random: e.Random,
              File_Str_Md5: e.File_Str_Md5,
              File_Size: e.File_Size,
              File_Type: e.File_Type,
              Server_Ver: _.SERVER_VERSION,
              Auth_Key: Y,
              Busi_Id: e.Busi_Id,
              PkgFlag: e.PkgFlag,
              Slice_Offset: e.Slice_Offset,
              Slice_Size: e.Slice_Size,
              Slice_Data: e.Slice_Data,
              content_type: "application/x-www-form-urlencoded",
            },
            t,
            n
          );
      }
    },
    At = function(e, t) {
      he(t, !0) && Gt.apiCall(s.OPEN_IM, "authkey", {}, e, t);
    },
    St = function(e, t, n) {
      he(n, !0) && Gt.apiCall(s.IM_OPEN_STAT, "web_report", e, t, n);
    },
    vt = function(e, t, n) {
      he(n, !0) &&
        Gt.apiCall(
          s.OPEN_IM,
          "getlongpollingid",
          {},
          function(e) {
            t && t(e);
          },
          n
        );
    },
    Ot = function(e, t, n) {
      Gt.apiCall(s.PIC, "apply_download", e, t, n);
    };
  !(function() {
    (i = ue.getBrowserInfo()),
      ae.info("BROWSER_INFO: type=" + i.type + ", ver=" + i.ver),
      "ie" == i.type && parseInt(i.ver) < 10 && (r = !0);
  })();
  var Gt =
      0 == r
        ? new function() {
            var e = null;
            (this.init = function(t, n, o) {
              t && (e = t);
            }),
              (this.callBack = function(t) {
                e && e(t);
              }),
              (this.clear = function() {
                e = null;
              }),
              (this.apiCall = function(e, t, n, o, i, r, s) {
                var u = Ee(e, t, 0, i);
                if (0 != u) {
                  var a = n.content_type
                    ? n.content_type
                    : "application/x-www-form-urlencoded";
                  de(
                    "POST",
                    u,
                    n,
                    r,
                    a,
                    s,
                    function(r) {
                      var s = null,
                        a = "";
                      "pic_up" == t && (n.Slice_Data = "");
                      var c =
                        "\n request url: \n" +
                        u +
                        "\n request body: \n" +
                        JSON.stringify(n) +
                        "\n response: \n" +
                        JSON.stringify(r);
                      r.ActionStatus == f.OK
                        ? (ae.info("[" + e + "][" + t + "]success: " + c),
                          o && o(r),
                          (s = 0),
                          (a = ""))
                        : ((s = r.ErrorCode),
                          (a = r.ErrorInfo),
                          i &&
                            ((r.SrcErrorInfo = r.ErrorInfo),
                            (r.ErrorInfo =
                              "[" + e + "][" + t + "]failed: " + c),
                            ("longpolling" == t && 60008 == r.ErrorCode) ||
                              ae.error(r.ErrorInfo),
                            i(r))),
                        Se(t, s, a);
                    },
                    function(e) {
                      i && i(e), Se(t, e.ErrorCode, e.ErrorInfo);
                    }
                  );
                }
              });
          }()
        : new function() {
            var e = null;
            (this.init = function(t, n, o) {
              t && (e = t);
            }),
              (this.callBack = function(t) {
                e && e(t);
              }),
              (this.clear = function() {
                e = null;
              }),
              (this.apiCall = function(e, t, n, o, i, r, s) {
                var u = Ee(e, t, 0, i);
                if (0 != u) {
                  var a = K++,
                    c = "jsonpRequest" + a,
                    l = document.createElement("script"),
                    p = 0;
                  (window[c] = V),
                    (l.type = "text/javascript"),
                    (u =
                      u +
                      "&jsonpcallback=" +
                      c +
                      "&jsonpbody=" +
                      encodeURIComponent(JSON.stringify(n))),
                    (l.src = u),
                    (l.async = !0),
                    void 0 !== l.onreadystatechange &&
                      ((l.event = "onclick"),
                      (l.htmlFor = l.id = "_jsonpRequest_" + a)),
                    (l.onload = l.onreadystatechange = function() {
                      if (
                        (this.readyState &&
                          "complete" !== this.readyState &&
                          "loaded" !== this.readyState) ||
                        p
                      )
                        return !1;
                      (l.onload = l.onreadystatechange = null),
                        l.onclick && l.onclick();
                      var r = H,
                        s =
                          "\n request url: \n" +
                          u +
                          "\n request body: \n" +
                          JSON.stringify(n) +
                          "\n response: \n" +
                          JSON.stringify(r);
                      r.ActionStatus == f.OK
                        ? (ae.info("[" + e + "][" + t + "]success: " + s),
                          o && o(r))
                        : ((r.ErrorInfo = "[" + e + "][" + t + "]failed " + s),
                          "longpolling" != t || 60008 != r.ErrorCode
                            ? ae.error(r.ErrorInfo)
                            : ae.warn("[" + e + "][" + t + "]success: " + s),
                          i && i(r)),
                        (H = void 0),
                        document.body.removeChild(l),
                        (p = 1);
                    }),
                    document.body.appendChild(l);
                }
              });
          }(),
    Ft = function(e, t, n, o, i, r) {
      this._impl = {
        skey: Ft.skey(e, t),
        type: e,
        id: t,
        name: n,
        icon: o,
        unread: 0,
        isAutoRead: !1,
        time: i >= 0 ? i : 0,
        curMaxMsgSeq: r >= 0 ? r : 0,
        msgs: [],
        isFinished: 1,
      };
    };
  (Ft.skey = function(e, t) {
    return e + t;
  }),
    (Ft.prototype.type = function() {
      return this._impl.type;
    }),
    (Ft.prototype.id = function() {
      return this._impl.id;
    }),
    (Ft.prototype.name = function() {
      return this._impl.name;
    }),
    (Ft.prototype.icon = function() {
      return this._impl.icon;
    }),
    (Ft.prototype.unread = function(e) {
      if (void 0 === e) return this._impl.unread;
      this._impl.unread = e;
    }),
    (Ft.prototype.isFinished = function(e) {
      if (void 0 === e) return this._impl.isFinished;
      this._impl.isFinished = e;
    }),
    (Ft.prototype.time = function() {
      return this._impl.time;
    }),
    (Ft.prototype.curMaxMsgSeq = function(e) {
      if (void 0 === e) return this._impl.curMaxMsgSeq;
      this._impl.curMaxMsgSeq = e;
    }),
    (Ft.prototype.msgCount = function() {
      return this._impl.msgs.length;
    }),
    (Ft.prototype.msg = function(e) {
      return this._impl.msgs[e];
    }),
    (Ft.prototype.msgs = function() {
      return this._impl.msgs;
    }),
    (Ft.prototype._impl_addMsg = function(e, t) {
      this._impl.msgs.push(e),
        e.time > this._impl.time && (this._impl.time = e.time),
        e.seq > this._impl.curMaxMsgSeq && (this._impl.curMaxMsgSeq = e.seq),
        e.isSend || this._impl.isAutoRead || !t || this._impl.unread++;
    });
  var Nt = function(e, t) {
      (this.toAccount = e), (this.lastedMsgTime = t);
    },
    Rt = function(e, t) {
      for (
        var n = parseInt(e).toString(2) + "00000000000000000000000000000000",
          o = parseInt(t).toString(2),
          i = n.split("").reverse(),
          r = o.split("").reverse(),
          s = null,
          u = [],
          a = i.length > r.length ? i.length : r.length,
          c = 0;
        c < a;
        c++
      )
        (s = Number(i[c] || 0) || Number(r[c] || 0)), u.push(s);
      var l = u.reverse().join(""),
        p = {
          high: "0x" + parseInt(l.substr(0, l.length - 32), 2).toString(16),
          low: "0x" + parseInt(l.substr(l.length - 32 - 1), 2).toString(16),
        };
      return new Long(p.low, p.high, !0).toString();
    },
    Pt = function(e, t, n, o, i, r, s, u, a) {
      switch (
        ((this.sess = e),
        (this.subType = s >= 0 ? s : 0),
        (this.fromAccount = r),
        (this.fromAccountNick = u || r),
        (this.fromAccountHeadurl = a || null),
        (this.isSend = Boolean(t)),
        (this.seq = n >= 0 ? n : le()),
        (this.random = o >= 0 ? o : pe()),
        (this.time = i >= 0 ? i : ce()),
        (this.elems = []),
        e.type())
      ) {
        case c.GROUP:
          this.uniqueId = Rt(this.seq, this.random);
          break;
        case c.C2C:
        default:
          this.uniqueId = Rt(this.time, this.random);
      }
    };
  (Pt.prototype.getSession = function() {
    return this.sess;
  }),
    (Pt.prototype.getType = function() {
      return this.subType;
    }),
    (Pt.prototype.getSubType = function() {
      return this.subType;
    }),
    (Pt.prototype.getFromAccount = function() {
      return this.fromAccount;
    }),
    (Pt.prototype.getFromAccountNick = function() {
      return this.fromAccountNick;
    }),
    (Pt.prototype.getIsSend = function() {
      return this.isSend;
    }),
    (Pt.prototype.getSeq = function() {
      return this.seq;
    }),
    (Pt.prototype.getTime = function() {
      return this.time;
    }),
    (Pt.prototype.getRandom = function() {
      return this.random;
    }),
    (Pt.prototype.getElems = function() {
      return this.elems;
    }),
    (Pt.prototype.getMsgUniqueId = function() {
      return this.uniqueId;
    }),
    (Pt.prototype.addText = function(t) {
      this.addElem(new e.Msg.Elem(g.TEXT, t));
    }),
    (Pt.prototype.addFace = function(t) {
      this.addElem(new e.Msg.Elem(g.FACE, t));
    }),
    (Pt.prototype.addImage = function(t) {
      this.addElem(new e.Msg.Elem(g.IMAGE, t));
    }),
    (Pt.prototype.addLocation = function(t) {
      this.addElem(new e.Msg.Elem(g.LOCATION, t));
    }),
    (Pt.prototype.addFile = function(t) {
      this.addElem(new e.Msg.Elem(g.FILE, t));
    }),
    (Pt.prototype.addCustom = function(t) {
      this.addElem(new e.Msg.Elem(g.CUSTOM, t));
    }),
    (Pt.prototype.addElem = function(e) {
      this.elems.push(e);
    }),
    (Pt.prototype.toHtml = function() {
      var e = "";
      for (var t in this.elems) {
        e += this.elems[t].toHtml();
      }
      return e;
    }),
    (Pt.prototype.setOfflinePushInfo = function(e) {
      this.offlinePushInfo = e;
    }),
    (Pt.Elem = function(e, t) {
      (this.type = e), (this.content = t);
    }),
    (Pt.Elem.prototype.getType = function() {
      return this.type;
    }),
    (Pt.Elem.prototype.getContent = function() {
      return this.content;
    }),
    (Pt.Elem.prototype.toHtml = function() {
      return this.content.toHtml();
    }),
    (Pt.Elem.Text = function(e) {
      this.text = ue.xssFilter(e);
    }),
    (Pt.Elem.Text.prototype.getText = function() {
      return this.text;
    }),
    (Pt.Elem.Text.prototype.toHtml = function() {
      return this.text;
    }),
    (Pt.Elem.Face = function(e, t) {
      (this.index = e), (this.data = t);
    }),
    (Pt.Elem.Face.prototype.getIndex = function() {
      return this.index;
    }),
    (Pt.Elem.Face.prototype.getData = function() {
      return this.data;
    }),
    (Pt.Elem.Face.prototype.toHtml = function() {
      var e = null,
        t = re[this.data],
        n = se[t];
      return n && n[1] && (e = n[1]), e ? "<img src='" + e + "'/>" : this.data;
    }),
    (Pt.Elem.Location = function(e, t, n) {
      (this.latitude = t), (this.longitude = e), (this.desc = n);
    }),
    (Pt.Elem.Location.prototype.getLatitude = function() {
      return this.latitude;
    }),
    (Pt.Elem.Location.prototype.getLongitude = function() {
      return this.longitude;
    }),
    (Pt.Elem.Location.prototype.getDesc = function() {
      return this.desc;
    }),
    (Pt.Elem.Location.prototype.toHtml = function() {
      return (
        "经度=" +
        this.longitude +
        ",纬度=" +
        this.latitude +
        ",描述=" +
        this.desc
      );
    }),
    (Pt.Elem.Images = function(e, t) {
      (this.UUID = e),
        "number" != typeof t && (t = parseInt(m[t] || m.UNKNOWN, 10)),
        (this.ImageFormat = t),
        (this.ImageInfoArray = []);
    }),
    (Pt.Elem.Images.prototype.addImage = function(e) {
      this.ImageInfoArray.push(e);
    }),
    (Pt.Elem.Images.prototype.toHtml = function() {
      var e = this.getImage(d.SMALL),
        t = this.getImage(d.LARGE),
        n = this.getImage(d.ORIGIN);
      return (
        t || (t = e),
        n || (n = e),
        "<img src='" +
          e.getUrl() +
          "#" +
          t.getUrl() +
          "#" +
          n.getUrl() +
          "' style='CURSOR: hand' id='" +
          this.getImageId() +
          "' bigImgUrl='" +
          t.getUrl() +
          "' onclick='imageClick(this)' />"
      );
    }),
    (Pt.Elem.Images.prototype.getImageId = function() {
      return this.UUID;
    }),
    (Pt.Elem.Images.prototype.getImageFormat = function() {
      return this.ImageFormat;
    }),
    (Pt.Elem.Images.prototype.getImage = function(e) {
      for (var t in this.ImageInfoArray)
        if (this.ImageInfoArray[t].getType() == e)
          return this.ImageInfoArray[t];
      var n = null;
      return (
        this.ImageInfoArray.forEach(function(t) {
          t.getType() == e && (n = t);
        }),
        n
      );
    }),
    (Pt.Elem.Images.Image = function(e, t, n, o, i) {
      (this.type = e),
        (this.size = t),
        (this.width = n),
        (this.height = o),
        (this.url = i);
    }),
    (Pt.Elem.Images.Image.prototype.getType = function() {
      return this.type;
    }),
    (Pt.Elem.Images.Image.prototype.getSize = function() {
      return this.size;
    }),
    (Pt.Elem.Images.Image.prototype.getWidth = function() {
      return this.width;
    }),
    (Pt.Elem.Images.Image.prototype.getHeight = function() {
      return this.height;
    }),
    (Pt.Elem.Images.Image.prototype.getUrl = function() {
      return this.url;
    }),
    (Pt.Elem.Sound = function(e, t, n, o, i, r, s) {
      (this.uuid = e),
        (this.second = t),
        (this.size = n),
        (this.senderId = o),
        (this.receiverId = i),
        (this.downFlag = r),
        (this.busiId = s == c.C2C ? 2 : 1),
        void 0 !== this.downFlag && void 0 !== this.busiId
          ? ye(e, o, 0, r, i, this.busiId, M.SOUND)
          : (this.downUrl = Me(e, o));
    }),
    (Pt.Elem.Sound.prototype.getUUID = function() {
      return this.uuid;
    }),
    (Pt.Elem.Sound.prototype.getSecond = function() {
      return this.second;
    }),
    (Pt.Elem.Sound.prototype.getSize = function() {
      return this.size;
    }),
    (Pt.Elem.Sound.prototype.getSenderId = function() {
      return this.senderId;
    }),
    (Pt.Elem.Sound.prototype.getDownUrl = function() {
      return this.downUrl;
    }),
    (Pt.Elem.Sound.prototype.toHtml = function() {
      return "ie" == i.type && parseInt(i.ver) <= 8
        ? "[这是一条语音消息]demo暂不支持ie8(含)以下浏览器播放语音,语音URL:" +
            this.downUrl
        : '<audio id="uuid_' +
            this.uuid +
            '" src="' +
            this.downUrl +
            '" controls="controls" onplay="onChangePlayAudio(this)" preload="none"></audio>';
    }),
    (Pt.Elem.File = function(e, t, n, o, i, r, s) {
      (this.uuid = e),
        (this.name = t),
        (this.size = n),
        (this.senderId = o),
        (this.receiverId = i),
        (this.downFlag = r),
        (this.busiId = s == c.C2C ? 2 : 1),
        void 0 !== r && void 0 !== busiId
          ? ye(e, o, 0, r, i, this.busiId, M.FILE)
          : (this.downUrl = _e(e, o, t));
    }),
    (Pt.Elem.File.prototype.getUUID = function() {
      return this.uuid;
    }),
    (Pt.Elem.File.prototype.getName = function() {
      return this.name;
    }),
    (Pt.Elem.File.prototype.getSize = function() {
      return this.size;
    }),
    (Pt.Elem.File.prototype.getSenderId = function() {
      return this.senderId;
    }),
    (Pt.Elem.File.prototype.getDownUrl = function() {
      return this.downUrl;
    }),
    (Pt.Elem.File.prototype.getDownFlag = function() {
      return this.downFlag;
    }),
    (Pt.Elem.File.prototype.toHtml = function() {
      var e, t;
      return (
        (e = this.size),
        (t = "Byte"),
        this.size >= 1024 && ((e = Math.round(this.size / 1024)), (t = "KB")),
        '<a href="javascript" onclick="webim.onDownFile("' +
          this.uuid +
          '")" title="点击下载文件" ><i class="glyphicon glyphicon-file">&nbsp;' +
          this.name +
          "(" +
          e +
          t +
          ")</i></a>"
      );
    }),
    (Pt.Elem.GroupTip = function(e, t, n, o, i, r) {
      (this.opType = e),
        (this.opUserId = t),
        (this.groupId = n),
        (this.groupName = o),
        (this.userIdList = i || []),
        (this.groupInfoList = []),
        (this.memberInfoList = []),
        (this.groupMemberNum = null),
        (this.userinfo = r || []);
    }),
    (Pt.Elem.GroupTip.prototype.addGroupInfo = function(e) {
      this.groupInfoList.push(e);
    }),
    (Pt.Elem.GroupTip.prototype.addMemberInfo = function(e) {
      this.memberInfoList.push(e);
    }),
    (Pt.Elem.GroupTip.prototype.getOpType = function() {
      return this.opType;
    }),
    (Pt.Elem.GroupTip.prototype.getOpUserId = function() {
      return this.opUserId;
    }),
    (Pt.Elem.GroupTip.prototype.getGroupId = function() {
      return this.groupId;
    }),
    (Pt.Elem.GroupTip.prototype.getGroupName = function() {
      return this.groupName;
    }),
    (Pt.Elem.GroupTip.prototype.getUserIdList = function() {
      return this.userIdList;
    }),
    (Pt.Elem.GroupTip.prototype.getUserInfo = function() {
      return this.userinfo;
    }),
    (Pt.Elem.GroupTip.prototype.getGroupInfoList = function() {
      return this.groupInfoList;
    }),
    (Pt.Elem.GroupTip.prototype.getMemberInfoList = function() {
      return this.memberInfoList;
    }),
    (Pt.Elem.GroupTip.prototype.getGroupMemberNum = function() {
      return this.groupMemberNum;
    }),
    (Pt.Elem.GroupTip.prototype.setGroupMemberNum = function(e) {
      return (this.groupMemberNum = e);
    }),
    (Pt.Elem.GroupTip.prototype.toHtml = function() {
      var e = "[群提示消息]";
      switch (this.opType) {
        case v.JOIN:
          e += this.opUserId + "邀请了";
          for (var t in this.userIdList)
            if (
              ((e += this.userIdList[t] + ","),
              this.userIdList.length > 10 && 9 == t)
            ) {
              e += "等" + this.userIdList.length + "人";
              break;
            }
          e += "加入该群";
          break;
        case v.QUIT:
          e += this.opUserId + "主动退出该群";
          break;
        case v.KICK:
          e += this.opUserId + "将";
          for (var t in this.userIdList)
            if (
              ((e += this.userIdList[t] + ","),
              this.userIdList.length > 10 && 9 == t)
            ) {
              e += "等" + this.userIdList.length + "人";
              break;
            }
          e += "踢出该群";
          break;
        case v.SET_ADMIN:
          e += this.opUserId + "将";
          for (var t in this.userIdList)
            if (
              ((e += this.userIdList[t] + ","),
              this.userIdList.length > 10 && 9 == t)
            ) {
              e += "等" + this.userIdList.length + "人";
              break;
            }
          e += "设为管理员";
          break;
        case v.CANCEL_ADMIN:
          e += this.opUserId + "取消";
          for (var t in this.userIdList)
            if (
              ((e += this.userIdList[t] + ","),
              this.userIdList.length > 10 && 9 == t)
            ) {
              e += "等" + this.userIdList.length + "人";
              break;
            }
          e += "的管理员资格";
          break;
        case v.MODIFY_GROUP_INFO:
          e += this.opUserId + "修改了群资料：";
          for (var t in this.groupInfoList) {
            var n = this.groupInfoList[t].getType(),
              o = this.groupInfoList[t].getValue();
            switch (n) {
              case O.FACE_URL:
                e += "群头像为" + o + "; ";
                break;
              case O.NAME:
                e += "群名称为" + o + "; ";
                break;
              case O.OWNER:
                e += "群主为" + o + "; ";
                break;
              case O.NOTIFICATION:
                e += "群公告为" + o + "; ";
                break;
              case O.INTRODUCTION:
                e += "群简介为" + o + "; ";
                break;
              default:
                e += "未知信息为:type=" + n + ",value=" + o + "; ";
            }
          }
          break;
        case v.MODIFY_MEMBER_INFO:
          e += this.opUserId + "修改了群成员资料:";
          for (var t in this.memberInfoList) {
            var i = this.memberInfoList[t].getUserId(),
              r = this.memberInfoList[t].getShutupTime();
            if (
              ((e += i + ": "),
              (e +=
                null != r && void 0 !== r
                  ? 0 == r
                    ? "取消禁言; "
                    : "禁言" + r + "秒; "
                  : " shutupTime为空"),
              this.memberInfoList.length > 10 && 9 == t)
            ) {
              e += "等" + this.memberInfoList.length + "人";
              break;
            }
          }
          break;
        case v.READED:
          Log.info("消息已读同步");
          break;
        default:
          e += "未知群提示消息类型：type=" + this.opType;
      }
      return e;
    }),
    (Pt.Elem.GroupTip.GroupInfo = function(e, t) {
      (this.type = e), (this.value = t);
    }),
    (Pt.Elem.GroupTip.GroupInfo.prototype.getType = function() {
      return this.type;
    }),
    (Pt.Elem.GroupTip.GroupInfo.prototype.getValue = function() {
      return this.value;
    }),
    (Pt.Elem.GroupTip.MemberInfo = function(e, t) {
      (this.userId = e), (this.shutupTime = t);
    }),
    (Pt.Elem.GroupTip.MemberInfo.prototype.getUserId = function() {
      return this.userId;
    }),
    (Pt.Elem.GroupTip.MemberInfo.prototype.getShutupTime = function() {
      return this.shutupTime;
    }),
    (Pt.Elem.Custom = function(e, t, n) {
      (this.data = e), (this.desc = t), (this.ext = n);
    }),
    (Pt.Elem.Custom.prototype.getData = function() {
      return this.data;
    }),
    (Pt.Elem.Custom.prototype.getDesc = function() {
      return this.desc;
    }),
    (Pt.Elem.Custom.prototype.getExt = function() {
      return this.ext;
    }),
    (Pt.Elem.Custom.prototype.toHtml = function() {
      return this.data;
    });
  var bt = new function() {
      var e = {},
        t = [];
      (msgCache = {}), (this.cookie = ""), (this.syncFlag = 0);
      var n = function(t) {
          for (var n in e) t(e[n]);
        },
        o = function(e) {
          var t = !1,
            n = e.sess._impl.skey,
            o = e.isSend + e.seq + e.random;
          return (
            msgCache[n] && msgCache[n][o] && (t = !0),
            msgCache[n]
              ? (msgCache[n][o] = { time: e.time })
              : ((msgCache[n] = {}), (msgCache[n][o] = { time: e.time })),
            t
          );
        };
      (this.sessMap = function() {
        return e;
      }),
        (this.sessCount = function() {
          return t.length;
        }),
        (this.sessByTypeId = function(t, n) {
          var o = Ft.skey(t, n);
          return void 0 === o || null == o ? null : e[o];
        }),
        (this.delSessByTypeId = function(t, n) {
          var o = Ft.skey(t, n);
          return (
            void 0 !== o &&
            null != o &&
            (e[o] && (delete e[o], delete msgCache[o]), !0)
          );
        }),
        (this.resetCookieAndSyncFlag = function() {
          (this.cookie = ""), (this.syncFlag = 0);
        }),
        (this.setAutoRead = function(e, t, o) {
          if (
            (o &&
              n(function(e) {
                e._impl.isAutoRead = !1;
              }),
            e && ((e._impl.isAutoRead = t), t))
          )
            if (((e._impl.unread = 0), e._impl.type == c.C2C)) {
              var i = [];
              i.push(new Nt(e._impl.id, e._impl.time)),
                be(
                  bt.cookie,
                  i,
                  function(e) {
                    ae.info("[setAutoRead]: c2CMsgReaded success");
                  },
                  function(e) {
                    ae.error(
                      "[setAutoRead}: c2CMsgReaded failed:" + e.ErrorInfo
                    );
                  }
                );
            } else if (e._impl.type == c.GROUP) {
              var r = {
                GroupId: e._impl.id,
                MsgReadedSeq: e._impl.curMaxMsgSeq,
              };
              ut(
                r,
                function(e) {
                  ae.info("groupMsgReaded success");
                },
                function(e) {
                  ae.error("groupMsgReaded failed:" + e.ErrorInfo);
                }
              );
            }
        }),
        (this.c2CMsgReaded = function(e, t, n) {
          var o = [];
          o.push(new Nt(e.To_Account, e.LastedMsgTime)),
            be(
              bt.cookie,
              o,
              function(e) {
                t && (ae.info("c2CMsgReaded success"), t(e));
              },
              function(e) {
                n && (ae.error("c2CMsgReaded failed:" + e.ErrorInfo), n(e));
              }
            );
        }),
        (this.addSession = function(t) {
          e[t._impl.skey] = t;
        }),
        (this.delSession = function(t) {
          delete e[t._impl.skey];
        }),
        (this.clear = function() {
          (e = {}),
            (t = []),
            (msgCache = {}),
            (this.cookie = ""),
            (this.syncFlag = 0);
        }),
        (this.addMsg = function(t, n) {
          if (o(t)) return !1;
          var i = t.sess;
          return (
            e[i._impl.skey] || this.addSession(i), i._impl_addMsg(t, n), !0
          );
        }),
        (this.updateTimeline = function() {
          var e = new Array();
          n(function(t) {
            e.push(t);
          }),
            e.sort(function(e, t) {
              return t.time - e.time;
            }),
            (t = e);
        });
    }(),
    Lt = new function() {
      var e = null,
        t = null,
        n = {
          1: null,
          2: null,
          3: null,
          4: null,
          5: null,
          6: null,
          7: null,
          8: null,
          9: null,
          10: null,
          11: null,
          15: null,
          255: null,
          12: null,
        },
        o = {
          1: null,
          2: null,
          3: null,
          4: null,
          5: null,
          6: null,
          7: null,
          8: null,
        },
        i = { 1: null },
        r = null,
        s = !1,
        u = 0,
        a = 0,
        l = null,
        p = !1,
        d = {},
        m = 90,
        h = null,
        I = {},
        E = { 92: null, 96: null },
        M = null,
        _ = {},
        R = {};
      (this.setLongPollingOn = function(e) {
        s = e;
      }),
        (this.getLongPollingOn = function() {
          return s;
        }),
        (this.resetLongPollingInfo = function() {
          (s = !1), (u = 0), (a = 0);
        }),
        (this.setBigGroupLongPollingOn = function(e) {
          p = e;
        }),
        (this.checkBigGroupLongPollingOn = function(e) {
          return !!h[e];
        }),
        (this.setBigGroupLongPollingKey = function(e, t) {
          h[e] = t;
        }),
        (this.resetBigGroupLongPollingInfo = function(e) {
          (p = !1), (d[e] = 0), (h[e] = null), (I[e] = {});
        }),
        (this.setBigGroupLongPollingMsgMap = function(e, t) {
          var n = I[e];
          n ? ((n = parseInt(n) + t), (I[e] = n)) : (I[e] = t);
        }),
        (this.clear = function() {
          (t = null),
            (n = {
              1: null,
              2: null,
              3: null,
              4: null,
              5: null,
              6: null,
              7: null,
              8: null,
              9: null,
              10: null,
              11: null,
              15: null,
              255: null,
              12: null,
            }),
            (o = {
              1: null,
              2: null,
              3: null,
              4: null,
              5: null,
              6: null,
              7: null,
              8: null,
            }),
            (i = { 1: null }),
            (e = null),
            (s = !1),
            (u = 0),
            (a = 0),
            (l = null),
            (p = !1),
            (d = {}),
            (h = {}),
            (I = {}),
            (R = {}),
            (z = []),
            (Y = null),
            (X = null);
        });
      var b = function(e, t) {
          At(
            function(t) {
              (z = t.IpList), (Y = t.AuthKey), (X = t.ExpireTime), e && e(t);
            },
            function(e) {
              ae.error("initIpAndAuthkey failed:" + e.ErrorInfo), t && t(e);
            }
          );
        },
        x = function(e, t) {
          var n = {
            Member_Account: j.identifier,
            Limit: 1e3,
            Offset: 0,
            GroupBaseInfoFilter: ["NextMsgSeq"],
          };
          nt(
            n,
            function(t) {
              if (!t.GroupIdList || 0 == t.GroupIdList.length)
                return (
                  ae.info("initMyGroupMaxSeqs: 目前还没有加入任何群组"),
                  void (e && e(t))
                );
              for (var n = 0; n < t.GroupIdList.length; n++) {
                var o = t.GroupIdList[n].GroupId,
                  i = t.GroupIdList[n].NextMsgSeq - 1;
                _[o] = i;
              }
              e && e(t);
            },
            function(e) {
              ae.error("initMyGroupMaxSeqs failed:" + e.ErrorInfo), t && t(e);
            }
          );
        },
        K = function(e, t) {
          var n = _[e];
          n ? t > n && (_[e] = t) : (_[e] = t);
        },
        H = function(e, t) {
          for (var n in e) {
            var o = e[n];
            if (o.From_Account) {
              var i = se(o, !1, !0);
              i && t.push(i), K(o.ToGroupId, o.MsgSeq);
            }
          }
          return t;
        },
        V = function(t, n) {
          var o = {},
            i = [];
          for (var r in n) {
            var s = o[n[r].ToGroupId];
            s || (s = o[n[r].ToGroupId] = { min: 99999999, max: -1, msgs: [] }),
              n[r].NoticeSeq > a &&
                (ae.warn("noticeSeq=" + a + ",msgNoticeSeq=" + n[r].NoticeSeq),
                (a = n[r].NoticeSeq)),
              (n[r].Event = t),
              o[n[r].ToGroupId].msgs.push(n[r]),
              n[r].MsgSeq < s.min && (o[n[r].ToGroupId].min = n[r].MsgSeq),
              n[r].MsgSeq > s.max && (o[n[r].ToGroupId].max = n[r].MsgSeq);
          }
          for (var u in o) i = H(o[u].msgs, i);
          i.length && bt.updateTimeline(), e && i.length && e(i);
        },
        J = function(t, n) {
          var o = {},
            i = [];
          for (var r in n) {
            var s = o[n[r].ToGroupId];
            s || (s = o[n[r].ToGroupId] = { min: 99999999, max: -1, msgs: [] }),
              n[r].NoticeSeq > a &&
                (ae.warn("noticeSeq=" + a + ",msgNoticeSeq=" + n[r].NoticeSeq),
                (a = n[r].NoticeSeq)),
              (n[r].Event = t),
              o[n[r].ToGroupId].msgs.push(n[r]),
              n[r].MsgSeq < s.min && (o[n[r].ToGroupId].min = n[r].MsgSeq),
              n[r].MsgSeq > s.max && (o[n[r].ToGroupId].max = n[r].MsgSeq);
          }
          for (var u in o) i = H(o[u].msgs, i);
          i.length && bt.updateTimeline(), e && i.length && e(i);
        },
        W = function(e, t) {
          for (var o in e) {
            var i = e[o],
              r = i.MsgBody,
              s = r.ReportType;
            0 == t && i.NoticeSeq && i.NoticeSeq > a && (a = i.NoticeSeq);
            i.GroupInfo.To_Account;
            if (t) {
              var u = i.ToGroupId + "_" + s + "_" + r.Operator_Account;
              if (R[u]) {
                ae.warn("收到重复的群系统消息：key=" + u);
                continue;
              }
              R[u] = !0;
            }
            var c = {
              SrcFlag: 0,
              ReportType: s,
              GroupId: i.ToGroupId,
              GroupName: i.GroupInfo.GroupName,
              Operator_Account: r.Operator_Account,
              MsgTime: i.MsgTimeStamp,
              groupReportTypeMsg: r,
            };
            switch (s) {
              case G.JOIN_GROUP_REQUEST:
                (c.RemarkInfo = r.RemarkInfo),
                  (c.MsgKey = r.MsgKey),
                  (c.Authentication = r.Authentication),
                  (c.UserDefinedField = i.UserDefinedField),
                  (c.From_Account = i.From_Account),
                  (c.MsgSeq = i.ClientSeq),
                  (c.MsgRandom = i.MsgRandom);
                break;
              case G.JOIN_GROUP_ACCEPT:
              case G.JOIN_GROUP_REFUSE:
                c.RemarkInfo = r.RemarkInfo;
                break;
              case G.KICK:
              case G.DESTORY:
              case G.CREATE:
              case G.INVITED_JOIN_GROUP_REQUEST:
              case G.INVITED_JOIN_GROUP_REQUEST_AGREE:
              case G.QUIT:
              case G.SET_ADMIN:
              case G.CANCEL_ADMIN:
              case G.REVOKE:
              case G.READED:
                break;
              case G.CUSTOM:
                (c.MsgSeq = i.MsgSeq),
                  (c.UserDefinedField = r.UserDefinedField);
                break;
              default:
                ae.error("未知群系统消息类型：reportType=" + s);
            }
            if (t)
              n[s] ? n[s](c) : ae.error("未知群系统消息类型：reportType=" + s);
            else if (n[s])
              if (s == G.READED)
                for (
                  var l = c.groupReportTypeMsg.GroupReadInfoArray,
                    p = 0,
                    f = l.length;
                  p < f;
                  p++
                ) {
                  var g = l[p];
                  n[s](g);
                }
              else n[s](c);
          }
        },
        Q = function(e, t) {
          var n, i, r;
          for (var s in e) {
            switch (
              ((n = e[s]),
              (i = n.PushType),
              0 == t && n.NoticeSeq && n.NoticeSeq > a && (a = n.NoticeSeq),
              (r = { Type: i }),
              i)
            ) {
              case F.FRIEND_ADD:
                r.Accounts = n.FriendAdd_Account;
                break;
              case F.FRIEND_DELETE:
                r.Accounts = n.FriendDel_Account;
                break;
              case F.PENDENCY_ADD:
                r.PendencyList = n.PendencyAdd;
                break;
              case F.PENDENCY_DELETE:
                r.Accounts = n.FrienPencydDel_Account;
                break;
              case F.BLACK_LIST_ADD:
                r.Accounts = n.BlackListAdd_Account;
                break;
              case F.BLACK_LIST_DELETE:
                r.Accounts = n.BlackListDel_Account;
                break;
              default:
                ae.error(
                  "未知好友系统通知类型：friendNotice=" + JSON.stringify(n)
                );
            }
            t ? i == F.PENDENCY_ADD && o[i] && o[i](r) : o[i] && o[i](r);
          }
        },
        Z = function(e, t) {
          var n, o, r;
          for (var s in e) {
            switch (
              ((n = e[s]),
              (o = n.PushType),
              0 == t && n.NoticeSeq && n.NoticeSeq > a && (a = n.NoticeSeq),
              (r = { Type: o }),
              o)
            ) {
              case N.PROFILE_MODIFY:
                (r.Profile_Account = n.Profile_Account),
                  (r.ProfileList = n.ProfileList);
                break;
              default:
                ae.error(
                  "未知资料系统通知类型：profileNotice=" + JSON.stringify(n)
                );
            }
            t ? o == N.PROFILE_MODIFY && i[o] && i[o](r) : i[o] && i[o](r);
          }
        },
        $ = function(e) {
          var t = e.MsgBody,
            o = t.ReportType,
            i = (e.GroupInfo.To_Account,
            {
              SrcFlag: 1,
              ReportType: o,
              GroupId: e.ToGroupId,
              GroupName: e.GroupInfo.GroupName,
              Operator_Account: t.Operator_Account,
              MsgTime: e.MsgTimeStamp,
            });
          switch (o) {
            case G.JOIN_GROUP_REQUEST:
              (i.RemarkInfo = t.RemarkInfo),
                (i.MsgKey = t.MsgKey),
                (i.Authentication = t.Authentication),
                (i.UserDefinedField = e.UserDefinedField),
                (i.From_Account = e.From_Account),
                (i.MsgSeq = e.ClientSeq),
                (i.MsgRandom = e.MsgRandom);
              break;
            case G.JOIN_GROUP_ACCEPT:
            case G.JOIN_GROUP_REFUSE:
              i.RemarkInfo = t.RemarkInfo;
              break;
            case G.KICK:
            case G.DESTORY:
            case G.CREATE:
            case G.INVITED_JOIN_GROUP_REQUEST:
            case G.INVITED_JOIN_GROUP_REQUEST_AGREE:
            case G.QUIT:
            case G.SET_ADMIN:
            case G.CANCEL_ADMIN:
            case G.REVOKE:
              break;
            case G.CUSTOM:
              (i.MsgSeq = e.MsgSeq), (i.UserDefinedField = t.UserDefinedField);
              break;
            default:
              ae.error("未知群系统消息类型：reportType=" + o);
          }
          n[o] && n[o](i);
        },
        ee = function(e) {
          for (var t = 0, n = e.length; t < n; t++) te(e[t]);
        },
        te = function(e) {
          var t = e.SubMsgType;
          switch (t) {
            case C.READED:
              if (
                (ae.warn("C2C已读消息通知"),
                e.ReadC2cMsgNotify &&
                  e.ReadC2cMsgNotify.UinPairReadArray &&
                  E[t])
              )
                for (
                  var n = 0, o = e.ReadC2cMsgNotify.UinPairReadArray.length;
                  n < o;
                  n++
                ) {
                  var i = e.ReadC2cMsgNotify.UinPairReadArray[n];
                  E[t](i);
                }
              break;
            case C.KICKEDOUT:
              ae.warn("多终端互踢通知"), Ge("instance"), E[t] && E[t]();
              break;
            default:
              ae.error("未知C2c系统消息：subType=" + t);
          }
        };
      (this.longPolling = function(e, t) {
        function n() {
          Ne(
            o,
            function(e) {
              for (var t in e.EventArray) {
                var n = e.EventArray[t];
                switch (n.Event) {
                  case y.C2C:
                    (u = n.NotifySeq),
                      ae.warn("longpolling: received new c2c msg"),
                      Lt.syncMsgs();
                    break;
                  case y.GROUP_COMMON:
                    ae.warn("longpolling: received new group msgs"),
                      J(n.Event, n.GroupMsgArray);
                    break;
                  case y.GROUP_TIP:
                  case y.GROUP_TIP2:
                    ae.warn("longpolling: received new group tips"),
                      J(n.Event, n.GroupTips);
                    break;
                  case y.GROUP_SYSTEM:
                    ae.warn("longpolling: received new group system msgs"),
                      W(n.GroupTips, !1);
                    break;
                  case y.FRIEND_NOTICE:
                    ae.warn("longpolling: received new friend system notice"),
                      Q(n.FriendListMod, !1);
                    break;
                  case y.PROFILE_NOTICE:
                    ae.warn("longpolling: received new profile system notice"),
                      Z(n.ProfileDataMod, !1);
                    break;
                  case y.C2C_COMMON:
                    (a = n.C2cMsgArray[0].NoticeSeq),
                      ae.warn("longpolling: received new c2c_common msg", a),
                      V(n.Event, n.C2cMsgArray);
                    break;
                  case y.C2C_EVENT:
                    (a = n.C2cNotifyMsgArray[0].NoticeSeq),
                      ae.warn("longpolling: received new c2c_event msg"),
                      ee(n.C2cNotifyMsgArray);
                    break;
                  default:
                    ae.error("longpolling收到未知新消息类型: Event=" + n.Event);
                }
              }
              var o = { ActionStatus: f.OK, ErrorCode: 0 };
              ne(o);
            },
            function(e) {
              ne(e), t && t(e);
            }
          );
        }
        var o = { Timeout: k / 1e3, Cookie: { NotifySeq: u, NoticeSeq: a } };
        q
          ? ((o.Cookie.LongPollingId = q), n())
          : vt(0, function(e) {
              (q = o.Cookie.LongPollingId = e.LongPollingId),
                (k = e.Timeout > 60 ? k : 1e3 * e.Timeout),
                n();
            });
      }),
        (this.bigGroupLongPolling = function(e, t, n) {
          var o = { USP: 1, StartSeq: d[e], HoldTime: m, Key: h[e] };
          Re(
            o,
            function(n) {
              var o = [];
              if (
                ((d[e] = n.NextSeq),
                (m = n.HoldTime),
                (h[e] = n.Key),
                n.RspMsgList && n.RspMsgList.length > 0)
              ) {
                for (
                  var i, r, s, u = 0, a = n.RspMsgList.length - 1;
                  a >= 0;
                  a--
                ) {
                  i = n.RspMsgList[a];
                  var c = {
                    F_Account: "From_Account",
                    T_Account: "To_Account",
                    FAType: "EnumFrom_AccountType",
                    TAType: "EnumTo_AccountType",
                    GCode: "GroupCode",
                    GName: "GroupName",
                    GId: "GroupId",
                    MFlg: "MsgFlag",
                    FAEInfo: "MsgFrom_AccountExtraInfo",
                    Evt: "Event",
                    GInfo: "GroupInfo",
                    BPlc: "IsPlaceMsg",
                    MBody: "MsgBody",
                    Pri: "MsgPriority",
                    Rdm: "MsgRandom",
                    MSeq: "MsgSeq",
                    TStp: "MsgTimeStamp",
                    TGId: "ToGroupId",
                    UEInfo: "UinExtInfo",
                    UId: "UserId",
                    BSys: "IsSystemMsg",
                    FAHUrl: "From_AccountHeadurl",
                    FANick: "From_AccountNick",
                  };
                  if (
                    ((i = ue.replaceObject(c, i)),
                    !i.IsPlaceMsg &&
                      i.From_Account &&
                      i.MsgBody &&
                      0 != i.MsgBody.length)
                  )
                    switch ((r = i.Event)) {
                      case y.GROUP_COMMON:
                        ae.info("bigGroupLongPolling: return new group msg"),
                          (s = se(i, !1, !1)),
                          s && o.push(s),
                          (u += 1);
                        break;
                      case y.GROUP_TIP:
                      case y.GROUP_TIP2:
                        ae.info("bigGroupLongPolling: return new group tip"),
                          (s = se(i, !1, !1)),
                          s && o.push(s);
                        break;
                      case y.GROUP_SYSTEM:
                        ae.info("bigGroupLongPolling: new group system msg"),
                          $(i);
                        break;
                      default:
                        ae.error(
                          "bigGroupLongPolling收到未知新消息类型: Event=" + r
                        );
                    }
                }
                u > 0 &&
                  (Lt.setBigGroupLongPollingMsgMap(i.ToGroupId, u),
                  ae.warn(
                    "current bigGroupLongPollingMsgMap: " + JSON.stringify(I)
                  ));
              }
              B = 0;
              var g = {
                ActionStatus: f.OK,
                ErrorCode: P.ON,
                ErrorInfo: "connection is ok...",
              };
              Gt.callBack(g),
                t ? t(o) : l && l(o),
                p && Lt.bigGroupLongPolling(e);
            },
            function(t) {
              if (
                (10018 == t.ErrorCode
                  ? (d[e] = 0)
                  : 60008 != t.ErrorCode && (ae.error(t.ErrorInfo), B++),
                91101 == t.ErrorCode &&
                  (ae.error("多实例登录，被kick"), r && r()),
                B < 10)
              )
                p && Lt.bigGroupLongPolling(e);
              else {
                var o = {
                  ActionStatus: f.FAIL,
                  ErrorCode: P.OFF,
                  ErrorInfo: "connection is off",
                };
                Gt.callBack(o);
              }
              n && n(t);
            },
            1e3 * m
          );
        });
      var ne = function(e) {
          if (0 == e.ErrorCode || 60008 == e.ErrorCode) {
            (D = 0), (w = !1);
            var t,
              n = !1;
            switch (U) {
              case P.INIT:
                (n = !0),
                  (U = P.ON),
                  (t = "create connection successfully(INIT->ON)");
                break;
              case P.ON:
                t = "connection is on...(ON->ON)";
                break;
              case P.RECONNECT:
                (U = P.ON), (t = "connection is on...(RECONNECT->ON)");
                break;
              case P.OFF:
                (n = !0),
                  (U = P.RECONNECT),
                  (t = "reconnect successfully(OFF->RECONNECT)");
            }
            var o = { ActionStatus: f.OK, ErrorCode: U, ErrorInfo: t };
            n && Gt.callBack(o), s && Lt.longPolling();
          } else if (91101 == e.ErrorCode)
            ae.error("多实例登录，被kick"), r && r();
          else if (
            (D++,
            ae.warn("longPolling接口第" + D + "次报错: " + e.ErrorInfo),
            D <= 10)
          )
            setTimeout(ie, 100);
          else {
            U = P.OFF;
            var i = {
              ActionStatus: f.FAIL,
              ErrorCode: P.OFF,
              ErrorInfo: "connection is off",
            };
            0 == w && Gt.callBack(i),
              (w = !0),
              ae.warn("5000毫秒之后,SDK会发起新的longPolling请求..."),
              setTimeout(ie, 5e3);
          }
        },
        V = function(t, n) {
          var o = [],
            i = [];
          i = n;
          for (var r in i) {
            var s,
              u,
              a = i[r],
              l = a.From_AccountHeadurl || "";
            a.From_Account == j.identifier
              ? ((s = !0), (u = a.To_Account))
              : ((s = !1), (u = a.From_Account));
            var p = bt.sessByTypeId(c.C2C, u);
            p || (p = new Ft(c.C2C, u, u, l, 0, 0));
            var f = new Pt(
                p,
                s,
                a.MsgSeq,
                a.MsgRandom,
                a.MsgTimeStamp,
                a.From_Account,
                T.COMMON,
                a.From_AccountNick,
                l
              ),
              d = null,
              m = null,
              h = null;
            for (var I in a.MsgBody) {
              switch (((d = a.MsgBody[I]), (h = d.MsgType))) {
                case g.TEXT:
                  m = new Pt.Elem.Text(d.MsgContent.Text);
                  break;
                case g.FACE:
                  m = new Pt.Elem.Face(d.MsgContent.Index, d.MsgContent.Data);
                  break;
                case g.IMAGE:
                  m = new Pt.Elem.Images(
                    d.MsgContent.UUID,
                    d.MsgContent.ImageFormat || ""
                  );
                  for (var E in d.MsgContent.ImageInfoArray) {
                    var M = d.MsgContent.ImageInfoArray[E];
                    m.addImage(
                      new Pt.Elem.Images.Image(
                        M.Type,
                        M.Size,
                        M.Width,
                        M.Height,
                        M.URL
                      )
                    );
                  }
                  break;
                case g.SOUND:
                  d.MsgContent
                    ? (m = new Pt.Elem.Sound(
                        d.MsgContent.UUID,
                        d.MsgContent.Second,
                        d.MsgContent.Size,
                        a.From_Account,
                        a.To_Account,
                        d.MsgContent.Download_Flag,
                        c.C2C
                      ))
                    : ((h = g.TEXT),
                      (m = new Pt.Elem.Text("[语音消息]下载地址解析出错")));
                  break;
                case g.LOCATION:
                  m = new Pt.Elem.Location(
                    d.MsgContent.Longitude,
                    d.MsgContent.Latitude,
                    d.MsgContent.Desc
                  );
                  break;
                case g.FILE:
                case g.FILE + " ":
                  (h = g.FILE),
                    d.MsgContent
                      ? (m = new Pt.Elem.File(
                          d.MsgContent.UUID,
                          d.MsgContent.FileName,
                          d.MsgContent.FileSize,
                          a.From_Account,
                          a.To_Account,
                          d.MsgContent.Download_Flag,
                          c.C2C
                        ))
                      : ((h = g.TEXT),
                        (m = new Pt.Elem.Text("[文件消息下载地址解析出错]")));
                  break;
                case g.CUSTOM:
                  try {
                    var _ = JSON.parse(d.MsgContent.Data);
                    if (_ && _.userAction && _.userAction == L.ING) continue;
                  } catch (e) {}
                  (h = g.CUSTOM),
                    (m = new Pt.Elem.Custom(
                      d.MsgContent.Data,
                      d.MsgContent.Desc,
                      d.MsgContent.Ext
                    ));
                  break;
                default:
                  (h = g.TEXT),
                    (m = new Pt.Elem.Text(
                      "web端暂不支持" + d.MsgType + "消息"
                    ));
              }
              f.elems.push(new Pt.Elem(h, m));
            }
            f.elems.length > 0 && bt.addMsg(f, !0) && o.push(f);
          }
          o.length > 0 && bt.updateTimeline(), o.length > 0 && e && e(o);
        },
        ie = function() {
          s && Lt.longPolling();
        },
        re = function(e) {
          for (var t in e) {
            var n = e[t];
            switch ((W(n.GroupTips, !0), n.Event)) {
              case y.GROUP_SYSTEM:
                ae.warn(
                  "handlerApplyJoinGroupSystemMsgs： handler new group system msg"
                ),
                  W(n.GroupTips, !0);
                break;
              default:
                ae.error("syncMsgs收到未知的群系统消息类型: Event=" + n.Event);
            }
          }
        };
      (this.syncMsgs = function(t, n) {
        var o = [],
          i = [];
        Pe(
          bt.cookie,
          bt.syncFlag,
          function(n) {
            2 == n.SyncFlag && (bt.syncFlag = 0),
              (i = n.MsgList),
              (bt.cookie = n.Cookie);
            for (var r in i) {
              var s,
                u,
                a,
                l = i[r];
              l.From_Account == j.identifier
                ? ((s = !0), (u = l.To_Account), (a = ""))
                : ((s = !1), (u = l.From_Account), (a = ""));
              var p = bt.sessByTypeId(c.C2C, u);
              p || (p = new Ft(c.C2C, u, u, a, 0, 0));
              var f = new Pt(
                  p,
                  s,
                  l.MsgSeq,
                  l.MsgRandom,
                  l.MsgTimeStamp,
                  l.From_Account,
                  T.COMMON,
                  l.From_AccountNick,
                  l.From_AccountHeadurl
                ),
                d = null,
                m = null,
                h = null;
              for (var I in l.MsgBody) {
                switch (((d = l.MsgBody[I]), (h = d.MsgType))) {
                  case g.TEXT:
                    m = new Pt.Elem.Text(d.MsgContent.Text);
                    break;
                  case g.FACE:
                    m = new Pt.Elem.Face(d.MsgContent.Index, d.MsgContent.Data);
                    break;
                  case g.IMAGE:
                    m = new Pt.Elem.Images(
                      d.MsgContent.UUID,
                      d.MsgContent.ImageFormat
                    );
                    for (var E in d.MsgContent.ImageInfoArray) {
                      var M = d.MsgContent.ImageInfoArray[E];
                      m.addImage(
                        new Pt.Elem.Images.Image(
                          M.Type,
                          M.Size,
                          M.Width,
                          M.Height,
                          M.URL
                        )
                      );
                    }
                    break;
                  case g.SOUND:
                    d.MsgContent
                      ? (m = new Pt.Elem.Sound(
                          d.MsgContent.UUID,
                          d.MsgContent.Second,
                          d.MsgContent.Size,
                          l.From_Account,
                          l.To_Account,
                          d.MsgContent.Download_Flag,
                          c.C2C
                        ))
                      : ((h = g.TEXT),
                        (m = new Pt.Elem.Text("[语音消息]下载地址解析出错")));
                    break;
                  case g.LOCATION:
                    m = new Pt.Elem.Location(
                      d.MsgContent.Longitude,
                      d.MsgContent.Latitude,
                      d.MsgContent.Desc
                    );
                    break;
                  case g.FILE:
                  case g.FILE + " ":
                    (h = g.FILE),
                      d.MsgContent
                        ? (m = new Pt.Elem.File(
                            d.MsgContent.UUID,
                            d.MsgContent.FileName,
                            d.MsgContent.FileSize,
                            l.From_Account,
                            l.To_Account,
                            d.MsgContent.Download_Flag,
                            c.C2C
                          ))
                        : ((h = g.TEXT),
                          (m = new Pt.Elem.Text("[文件消息下载地址解析出错]")));
                    break;
                  case g.CUSTOM:
                    try {
                      var _ = JSON.parse(d.MsgContent.Data);
                      if (_ && _.userAction && _.userAction == L.ING) continue;
                    } catch (e) {}
                    (h = g.CUSTOM),
                      (m = new Pt.Elem.Custom(
                        d.MsgContent.Data,
                        d.MsgContent.Desc,
                        d.MsgContent.Ext
                      ));
                    break;
                  default:
                    (h = g.TEXT),
                      (m = new Pt.Elem.Text(
                        "web端暂不支持" + d.MsgType + "消息"
                      ));
                }
                f.elems.push(new Pt.Elem(h, m));
              }
              f.elems.length > 0 && bt.addMsg(f, !0) && o.push(f);
            }
            re(n.EventArray),
              o.length > 0 && bt.updateTimeline(),
              t ? t(o) : o.length > 0 && e && e(o);
          },
          function(e) {
            ae.error("getMsgs failed:" + e.ErrorInfo), n && n(e);
          }
        );
      }),
        (this.getC2CHistoryMsgs = function(e, t, n) {
          if (!e.Peer_Account && n)
            return void n(ue.getReturnError("Peer_Account is empty", -13));
          if ((e.MaxCnt || (e.MaxCnt = 15), e.MaxCnt <= 0 && n))
            return void n(
              ue.getReturnError("MaxCnt should be greater than 0", -14)
            );
          if (e.MaxCnt > 15) {
            if (n)
              return void n(
                ue.getReturnError("MaxCnt can not be greater than 15", -15)
              );
          } else {
            (null != e.MsgKey && void 0 !== e.MsgKey) || (e.MsgKey = "");
            var o = {
              Peer_Account: e.Peer_Account,
              MaxCnt: e.MaxCnt,
              LastMsgTime: e.LastMsgTime,
              MsgKey: e.MsgKey,
            };
            Ue(
              o,
              function(n) {
                var o = [],
                  i = [];
                i = n.MsgList;
                var r = bt.sessByTypeId(c.C2C, e.Peer_Account);
                r ||
                  (r = new Ft(c.C2C, e.Peer_Account, e.Peer_Account, "", 0, 0));
                for (var s in i) {
                  var u,
                    a = i[s],
                    l = a.From_AccountHeadurl || "";
                  a.From_Account == j.identifier
                    ? ((u = !0), a.To_Account)
                    : ((u = !1), a.From_Account);
                  var p = new Pt(
                      r,
                      u,
                      a.MsgSeq,
                      a.MsgRandom,
                      a.MsgTimeStamp,
                      a.From_Account,
                      T.COMMON,
                      a.From_AccountNick,
                      l
                    ),
                    f = null,
                    d = null,
                    m = null;
                  for (var h in a.MsgBody) {
                    switch (((f = a.MsgBody[h]), (m = f.MsgType))) {
                      case g.TEXT:
                        d = new Pt.Elem.Text(f.MsgContent.Text);
                        break;
                      case g.FACE:
                        d = new Pt.Elem.Face(
                          f.MsgContent.Index,
                          f.MsgContent.Data
                        );
                        break;
                      case g.IMAGE:
                        d = new Pt.Elem.Images(
                          f.MsgContent.UUID,
                          f.MsgContent.ImageFormat
                        );
                        for (var I in f.MsgContent.ImageInfoArray) {
                          var E = f.MsgContent.ImageInfoArray[I];
                          d.addImage(
                            new Pt.Elem.Images.Image(
                              E.Type,
                              E.Size,
                              E.Width,
                              E.Height,
                              E.URL
                            )
                          );
                        }
                        break;
                      case g.SOUND:
                        f.MsgContent
                          ? (d = new Pt.Elem.Sound(
                              f.MsgContent.UUID,
                              f.MsgContent.Second,
                              f.MsgContent.Size,
                              a.From_Account,
                              a.To_Account,
                              f.MsgContent.Download_Flag,
                              c.C2C
                            ))
                          : ((m = g.TEXT),
                            (d = new Pt.Elem.Text(
                              "[语音消息]下载地址解析出错"
                            )));
                        break;
                      case g.LOCATION:
                        d = new Pt.Elem.Location(
                          f.MsgContent.Longitude,
                          f.MsgContent.Latitude,
                          f.MsgContent.Desc
                        );
                        break;
                      case g.FILE:
                      case g.FILE + " ":
                        (m = g.FILE),
                          f.MsgContent
                            ? (d = new Pt.Elem.File(
                                f.MsgContent.UUID,
                                f.MsgContent.FileName,
                                f.MsgContent.FileSize,
                                a.From_Account,
                                a.To_Account,
                                f.MsgContent.Download_Flag,
                                c.C2C
                              ))
                            : ((m = g.TEXT),
                              (d = new Pt.Elem.Text(
                                "[文件消息下载地址解析出错]"
                              )));
                        break;
                      case g.CUSTOM:
                        (m = g.CUSTOM),
                          (d = new Pt.Elem.Custom(
                            f.MsgContent.Data,
                            f.MsgContent.Desc,
                            f.MsgContent.Ext
                          ));
                        break;
                      default:
                        (m = g.TEXT),
                          (d = new Pt.Elem.Text(
                            "web端暂不支持" + f.MsgType + "消息"
                          ));
                    }
                    p.elems.push(new Pt.Elem(m, d));
                  }
                  bt.addMsg(p), o.push(p);
                }
                if ((bt.updateTimeline(), t)) {
                  var M = {
                    Complete: n.Complete,
                    MsgCount: o.length,
                    LastMsgTime: n.LastMsgTime,
                    MsgKey: n.MsgKey,
                    MsgList: o,
                  };
                  r.isFinished(n.Complete), t(M);
                }
              },
              function(e) {
                ae.error("getC2CHistoryMsgs failed:" + e.ErrorInfo), n && n(e);
              }
            );
          }
        }),
        (this.syncGroupMsgs = function(t, n, o) {
          if (t.ReqMsgSeq <= 0) {
            if (o) {
              var i = ue.getReturnError(
                "ReqMsgSeq must be greater than 0",
                -16
              );
              o(i);
            }
          } else {
            var r = {
              GroupId: t.GroupId,
              ReqMsgSeq: t.ReqMsgSeq,
              ReqMsgNumber: t.ReqMsgNumber,
            };
            st(
              r,
              function(t) {
                var o = [],
                  i = (t.GroupId, t.RspMsgList),
                  r = t.IsFinished;
                if (null == i || void 0 === i) return void (n && n([]));
                for (var s = i.length - 1; s >= 0; s--) {
                  var u = i[s];
                  if (
                    !u.IsPlaceMsg &&
                    u.From_Account &&
                    u.MsgBody &&
                    0 != u.MsgBody.length
                  ) {
                    var a = se(u, !0, !0, r);
                    a && o.push(a);
                  }
                }
                o.length > 0 && bt.updateTimeline(),
                  n ? n(o) : o.length > 0 && e && e(o);
              },
              function(e) {
                ae.error("getGroupMsgs failed:" + e.ErrorInfo), o && o(e);
              }
            );
          }
        });
      var se = function(e, n, o, i) {
        if (
          e.IsPlaceMsg ||
          !e.From_Account ||
          !e.MsgBody ||
          0 == e.MsgBody.length
        )
          return null;
        var r,
          s,
          u,
          a,
          l = e.ToGroupId,
          p = l;
        e.GroupInfo && e.GroupInfo.GroupName && (p = e.GroupInfo.GroupName),
          (u = e.From_Account),
          e.GroupInfo &&
            (e.GroupInfo.From_AccountNick && (u = e.GroupInfo.From_AccountNick),
            (a = e.GroupInfo.From_AccountHeadurl
              ? e.GroupInfo.From_AccountHeadurl
              : null)),
          e.From_Account == j.identifier
            ? ((r = !0), e.From_Account, (s = ""))
            : ((r = !1), e.From_Account, (s = ""));
        var f = bt.sessByTypeId(c.GROUP, l);
        f || (f = new Ft(c.GROUP, l, p, s, 0, 0)),
          void 0 !== i && f.isFinished(i || 0);
        var d = A.COMMON;
        if (y.GROUP_TIP == e.Event || y.GROUP_TIP2 == e.Event) {
          d = A.TIP;
          var m = e.MsgBody;
          (e.MsgBody = []),
            e.MsgBody.push({ MsgType: g.GROUP_TIP, MsgContent: m });
        } else
          e.MsgPriority &&
            (e.MsgPriority == S.REDPACKET
              ? (d = A.REDPACKET)
              : e.MsgPriority == S.LOVEMSG && (d = A.LOVEMSG));
        var h = new Pt(
            f,
            r,
            e.MsgSeq,
            e.MsgRandom,
            e.MsgTimeStamp,
            e.From_Account,
            d,
            u,
            a
          ),
          I = null,
          E = null,
          M = null;
        for (var _ in e.MsgBody) {
          switch (((I = e.MsgBody[_]), (M = I.MsgType))) {
            case g.TEXT:
              E = new Pt.Elem.Text(I.MsgContent.Text);
              break;
            case g.FACE:
              E = new Pt.Elem.Face(I.MsgContent.Index, I.MsgContent.Data);
              break;
            case g.IMAGE:
              E = new Pt.Elem.Images(
                I.MsgContent.UUID,
                I.MsgContent.ImageFormat || ""
              );
              for (var T in I.MsgContent.ImageInfoArray)
                E.addImage(
                  new Pt.Elem.Images.Image(
                    I.MsgContent.ImageInfoArray[T].Type,
                    I.MsgContent.ImageInfoArray[T].Size,
                    I.MsgContent.ImageInfoArray[T].Width,
                    I.MsgContent.ImageInfoArray[T].Height,
                    I.MsgContent.ImageInfoArray[T].URL
                  )
                );
              break;
            case g.SOUND:
              I.MsgContent
                ? (E = new Pt.Elem.Sound(
                    I.MsgContent.UUID,
                    I.MsgContent.Second,
                    I.MsgContent.Size,
                    e.From_Account,
                    e.To_Account,
                    I.MsgContent.Download_Flag,
                    c.GROUP
                  ))
                : ((M = g.TEXT),
                  (E = new Pt.Elem.Text("[语音消息]下载地址解析出错")));
              break;
            case g.LOCATION:
              E = new Pt.Elem.Location(
                I.MsgContent.Longitude,
                I.MsgContent.Latitude,
                I.MsgContent.Desc
              );
              break;
            case g.FILE:
            case g.FILE + " ":
              M = g.FILE;
              _e(I.MsgContent.UUID, e.From_Account, I.MsgContent.FileName);
              I.MsgContent
                ? (E = new Pt.Elem.File(
                    I.MsgContent.UUID,
                    I.MsgContent.FileName,
                    I.MsgContent.FileSize,
                    e.From_Account,
                    e.To_Account,
                    I.MsgContent.Download_Flag,
                    c.GROUP
                  ))
                : ((M = g.TEXT),
                  (E = new Pt.Elem.Text("[文件消息]地址解析出错")));
              break;
            case g.GROUP_TIP:
              var C = I.MsgContent.OpType;
              if (
                ((E = new Pt.Elem.GroupTip(
                  C,
                  I.MsgContent.Operator_Account,
                  l,
                  e.GroupInfo.GroupName,
                  I.MsgContent.List_Account,
                  I.MsgContent.MsgMemberExtraInfo
                )),
                v.JOIN == C || v.QUIT == C)
              )
                E.setGroupMemberNum(I.MsgContent.MemberNum);
              else if (v.MODIFY_GROUP_INFO == C) {
                var G = !1,
                  F = {
                    GroupId: l,
                    GroupFaceUrl: null,
                    GroupName: null,
                    OwnerAccount: null,
                    GroupNotification: null,
                    GroupIntroduction: null,
                  },
                  N = I.MsgContent.MsgGroupNewInfo;
                if (N.GroupFaceUrl) {
                  var R = new Pt.Elem.GroupTip.GroupInfo(
                    O.FACE_URL,
                    N.GroupFaceUrl
                  );
                  E.addGroupInfo(R),
                    (G = !0),
                    (F.GroupFaceUrl = N.GroupFaceUrl);
                }
                if (N.GroupName) {
                  var P = new Pt.Elem.GroupTip.GroupInfo(O.NAME, N.GroupName);
                  E.addGroupInfo(P), (G = !0), (F.GroupName = N.GroupName);
                }
                if (N.Owner_Account) {
                  var b = new Pt.Elem.GroupTip.GroupInfo(
                    O.OWNER,
                    N.Owner_Account
                  );
                  E.addGroupInfo(b),
                    (G = !0),
                    (F.OwnerAccount = N.Owner_Account);
                }
                if (N.GroupNotification) {
                  var L = new Pt.Elem.GroupTip.GroupInfo(
                    O.NOTIFICATION,
                    N.GroupNotification
                  );
                  E.addGroupInfo(L),
                    (G = !0),
                    (F.GroupNotification = N.GroupNotification);
                }
                if (N.GroupIntroduction) {
                  var U = new Pt.Elem.GroupTip.GroupInfo(
                    O.INTRODUCTION,
                    N.GroupIntroduction
                  );
                  E.addGroupInfo(U),
                    (G = !0),
                    (F.GroupIntroduction = N.GroupIntroduction);
                }
                0 == n && G && t && t(F);
              } else if (v.MODIFY_MEMBER_INFO == C) {
                var w = I.MsgContent.MsgMemberInfo;
                for (var D in w) {
                  var k = w[D];
                  E.addMemberInfo(
                    new Pt.Elem.GroupTip.MemberInfo(
                      k.User_Account,
                      k.ShutupTime
                    )
                  );
                }
              }
              break;
            case g.CUSTOM:
              (M = g.CUSTOM),
                (E = new Pt.Elem.Custom(
                  I.MsgContent.Data,
                  I.MsgContent.Desc,
                  I.MsgContent.Ext
                ));
              break;
            default:
              (M = g.TEXT),
                (E = new Pt.Elem.Text("web端暂不支持" + I.MsgType + "消息"));
          }
          h.elems.push(new Pt.Elem(M, E));
        }
        return 0 == o
          ? h
          : bt.addMsg(h, !0)
          ? ((h.extraInfo = e.GroupInfo.MsgFrom_AccountExtraInfo), h)
          : null;
      };
      (this.init = function(u, a, c) {
        if (
          (u.onMsgNotify || ae.warn("listeners.onMsgNotify is empty"),
          (e = u.onMsgNotify),
          u.onBigGroupMsgNotify
            ? (l = u.onBigGroupMsgNotify)
            : ae.warn("listeners.onBigGroupMsgNotify is empty"),
          u.onC2cEventNotifys
            ? (E = u.onC2cEventNotifys)
            : ae.warn("listeners.onC2cEventNotifys is empty"),
          u.onGroupSystemNotifys
            ? (n = u.onGroupSystemNotifys)
            : ae.warn("listeners.onGroupSystemNotifys is empty"),
          u.onGroupInfoChangeNotify
            ? (t = u.onGroupInfoChangeNotify)
            : ae.warn("listeners.onGroupInfoChangeNotify is empty"),
          u.onFriendSystemNotifys
            ? (o = u.onFriendSystemNotifys)
            : ae.warn("listeners.onFriendSystemNotifys is empty"),
          u.onProfileSystemNotifys
            ? (i = u.onProfileSystemNotifys)
            : ae.warn("listeners.onProfileSystemNotifys is empty"),
          u.onKickedEventCall
            ? (r = u.onKickedEventCall)
            : ae.warn("listeners.onKickedEventCall is empty"),
          u.onLongPullingNotify
            ? (oe = u.onLongPullingNotify)
            : ae.warn("listeners.onKickedEventCall is empty"),
          u.onAppliedDownloadUrl
            ? (M = u.onAppliedDownloadUrl)
            : ae.warn("listeners.onAppliedDownloadUrl is empty"),
          j.identifier && j.userSig)
        )
          x(function(e) {
            ae.info("initMyGroupMaxSeqs success"),
              b(function(e) {
                if ((ae.info("initIpAndAuthkey success"), a)) {
                  ae.info("login success(have login state))");
                  var t = {
                    ActionStatus: f.OK,
                    ErrorCode: 0,
                    ErrorInfo: "login success",
                  };
                  a(t);
                }
                Lt.setLongPollingOn(!0), s && Lt.longPolling(a);
              }, c);
          }, c);
        else if (a) {
          var p = {
            ActionStatus: f.OK,
            ErrorCode: 0,
            ErrorInfo: "login success(no login state)",
          };
          a(p);
        }
      }),
        (this.sendMsg = function(e, t, n) {
          Fe(
            e,
            function(o) {
              if (e.sess.type() == c.C2C) {
                if (!bt.addMsg(e)) {
                  var i = "sendMsg: addMsg failed!",
                    r = ue.getReturnError(i, -17);
                  return ae.error(i), void (n && n(r));
                }
                bt.updateTimeline();
              }
              t && t(o);
            },
            function(e) {
              n && n(e);
            }
          );
        });
    }(),
    Ut = new function() {
      this.fileMd5 = null;
      var e = function(e, t, n) {
        function o() {
          var t = a * s,
            n = t + s >= e.size ? e.size : t + s,
            o = r.call(e, t, n);
          i.readAsArrayBuffer(o);
        }
        var i = null;
        try {
          i = new FileReader();
        } catch (e) {
          if (n)
            return void n(ue.getReturnError("当前浏览器不支持FileReader", -18));
        }
        var r =
          File.prototype.mozSlice ||
          File.prototype.webkitSlice ||
          File.prototype.slice;
        if (!r && n)
          return void n(ue.getReturnError("当前浏览器不支持FileAPI", -19));
        var s = 2097152,
          u = Math.ceil(e.size / s),
          a = 0,
          c = new SparkMD5();
        (i.onload = function(e) {
          for (
            var n = "",
              i = new Uint8Array(e.target.result),
              r = i.byteLength,
              s = 0;
            s < r;
            s++
          )
            n += String.fromCharCode(i[s]);
          c.appendBinary(n),
            a++,
            a < u ? o() : ((this.fileMd5 = c.end()), t && t(this.fileMd5));
        }),
          o();
      };
      (this.submitUploadFileForm = function(e, t, n) {
        function o(e, t) {
          var n = document.createElement("input");
          (n.type = "hidden"), (n.name = e), (n.value = t), d.appendChild(n);
        }
        function i() {
          var e;
          try {
            e = JSON.parse(I.contentWindow.name) || {};
          } catch (t) {
            e = {};
          }
          e.ActionStatus
            ? ((I.src = "about:blank"),
              I.parentNode.removeChild(I),
              (I = null),
              e.ActionStatus == f.OK ? t && t(e) : n && n(e))
            : setTimeout(i, 100);
        }
        var r,
          s,
          u = e.formId,
          a = e.fileId,
          c = J++,
          l = "uploadResultIframe_" + c,
          p = e.To_Account,
          g = e.businessType,
          d = document.getElementById(u);
        if (!d)
          return (
            (r = "获取表单对象为空: formId=" + u + "(formId非法)"),
            (s = ue.getReturnError(r, -20)),
            void (n && n(s))
          );
        var m = document.getElementById(a);
        if (!m)
          return (
            (r =
              "获取文件对象为空: fileId=" + a + "(没有选择文件或者fileId非法)"),
            (s = ue.getReturnError(r, -21)),
            void (n && n(s))
          );
        m.name = "file";
        var I = document.createElement("iframe");
        (I.name = l),
          (I.id = l),
          (I.style.display = "none"),
          document.body.appendChild(I);
        var E;
        E = Ie() ? "pic_up" : "pic_up_test";
        var M =
          "https://pic.tim.qq.com/v4/openpic/" +
          E +
          "?tinyid=" +
          j.tinyid +
          "&a2=" +
          j.a2 +
          "&sdkappid=" +
          j.sdkAppID +
          "&accounttype=" +
          j.accountType +
          "&contenttype=http";
        (d.action = M),
          (d.method = "post"),
          (d.target = l),
          o("App_Version", _.APP_VERSION),
          o("From_Account", j.identifier),
          o("To_Account", p),
          o("Seq", le().toString()),
          o("Timestamp", ce().toString()),
          o("Random", pe().toString()),
          o("Busi_Id", g),
          o("PkgFlag", h.RAW_DATA.toString()),
          o("Auth_Key", Y),
          o("Server_Ver", _.SERVER_VERSION.toString()),
          o("File_Type", e.fileType),
          setTimeout(i, 500),
          d.submit();
      }),
        (this.uploadFile = function(t, n, o) {
          var i = {
            init: function(e, t, n) {
              var o = this;
              (o.file = e.file),
                (o.onProgressCallBack = e.onProgressCallBack),
                e.abortButton && (e.abortButton.onclick = o.abortHandler),
                (o.total = o.file.size),
                (o.loaded = 0),
                (o.step = 1105920),
                (o.sliceSize = 0),
                (o.sliceOffset = 0),
                (o.timestamp = ce()),
                (o.seq = le()),
                (o.random = pe()),
                (o.fromAccount = j.identifier),
                (o.toAccount = e.To_Account),
                (o.fileMd5 = e.fileMd5),
                (o.businessType = e.businessType),
                (o.fileType = e.fileType),
                (o.cbOk = t),
                (o.cbErr = n),
                (o.reader = new FileReader()),
                (o.blobSlice =
                  File.prototype.mozSlice ||
                  File.prototype.webkitSlice ||
                  File.prototype.slice),
                (o.reader.onloadstart = o.onLoadStart),
                (o.reader.onprogress = o.onProgress),
                (o.reader.onabort = o.onAbort),
                (o.reader.onerror = o.onerror),
                (o.reader.onload = o.onLoad),
                (o.reader.onloadend = o.onLoadEnd);
            },
            upload: function() {
              i.readBlob(0);
            },
            onLoadStart: function() {},
            onProgress: function(e) {
              var t = i;
              (t.loaded += e.loaded),
                t.onProgressCallBack && t.onProgressCallBack(t.loaded, t.total);
            },
            onAbort: function() {},
            onError: function() {},
            onLoad: function(e) {
              var t = i;
              if (e.target.readyState == FileReader.DONE) {
                var n = e.target.result,
                  o = n.indexOf(",");
                -1 != o && (n = n.substr(o + 1));
                var r = {
                    From_Account: t.fromAccount,
                    To_Account: t.toAccount,
                    Busi_Id: t.businessType,
                    File_Type: t.fileType,
                    File_Str_Md5: t.fileMd5,
                    PkgFlag: h.BASE64_DATA,
                    File_Size: t.total,
                    Slice_Offset: t.sliceOffset,
                    Slice_Size: t.sliceSize,
                    Slice_Data: n,
                    Seq: t.seq,
                    Timestamp: t.timestamp,
                    Random: t.random,
                  },
                  s = function(e) {
                    if (0 == e.IsFinish)
                      (t.loaded = e.Next_Offset),
                        t.loaded < t.total
                          ? t.readBlob(t.loaded)
                          : (t.loaded = t.total);
                    else if (t.cbOk) {
                      var n = {
                        ActionStatus: e.ActionStatus,
                        ErrorCode: e.ErrorCode,
                        ErrorInfo: e.ErrorInfo,
                        File_UUID: e.File_UUID,
                        File_Size: e.Next_Offset,
                        URL_INFO: e.URL_INFO,
                        Download_Flag: e.Download_Flag,
                      };
                      t.fileType == M.FILE &&
                        (n.URL_INFO = _e(
                          e.File_UUID,
                          j.identifier,
                          t.file.name
                        )),
                        t.cbOk(n);
                    }
                    x = 0;
                  },
                  u = function(e) {
                    x < 20
                      ? (x++,
                        setTimeout(function() {
                          Ct(r, s, u);
                        }, 1e3))
                      : t.cbErr(e);
                  };
                Ct(r, s, u);
              }
            },
            onLoadEnd: function() {},
            readBlob: function(e) {
              var t,
                n = i,
                o = n.file,
                r = e + n.step;
              r > n.total
                ? ((r = n.total), (n.sliceSize = r - e))
                : (n.sliceSize = n.step),
                (n.sliceOffset = e),
                (t = n.blobSlice.call(o, e, r)),
                n.reader.readAsDataURL(t);
            },
            abortHandler: function() {
              var e = i;
              e.reader && e.reader.abort();
            },
          };
          e(
            t.file,
            function(e) {
              ae.info("fileMd5: " + e),
                (t.fileMd5 = e),
                i.init(t, n, o),
                i.upload();
            },
            o
          );
        });
    }();
  (e.SESSION_TYPE = c),
    (e.MSG_MAX_LENGTH = p),
    (e.C2C_MSG_SUB_TYPE = T),
    (e.GROUP_MSG_SUB_TYPE = A),
    (e.MSG_ELEMENT_TYPE = g),
    (e.GROUP_TIP_TYPE = v),
    (e.IMAGE_TYPE = d),
    (e.GROUP_SYSTEM_TYPE = G),
    (e.FRIEND_NOTICE_TYPE = F),
    (e.GROUP_TIP_MODIFY_GROUP_INFO_TYPE = O),
    (e.BROWSER_INFO = i),
    (e.Emotions = e.EmotionPicData = se),
    (e.EmotionDataIndexs = e.EmotionPicDataIndex = re),
    (e.TLS_ERROR_CODE = R),
    (e.CONNECTION_STATUS = P),
    (e.UPLOAD_PIC_BUSSINESS_TYPE = b),
    (e.RECENT_CONTACT_TYPE = l),
    (e.UPLOAD_RES_TYPE = M),
    (e.Tool = ue),
    (e.Log = ae),
    (e.Msg = Pt),
    (e.Session = Ft),
    (e.MsgStore = {
      sessMap: function() {
        return bt.sessMap();
      },
      sessCount: function() {
        return bt.sessCount();
      },
      sessByTypeId: function(e, t) {
        return bt.sessByTypeId(e, t);
      },
      delSessByTypeId: function(e, t) {
        return bt.delSessByTypeId(e, t);
      },
      resetCookieAndSyncFlag: function() {
        return bt.resetCookieAndSyncFlag();
      },
    }),
    (e.Resources = ie),
    (e.login = e.init = function(e, t, n, o, i) {
      Gt.init(t.onConnNotify, o, i),
        t.jsonpCallback && (V = t.jsonpCallback),
        Ae(e, t, n, o, i);
    }),
    (e.logout = e.offline = function(e, t) {
      return Ge("instance", e, t);
    }),
    (e.logoutAll = function(e, t) {
      return Ge("all", e, t);
    }),
    (e.sendMsg = function(e, t, n) {
      return Lt.sendMsg(e, t, n);
    }),
    (e.syncMsgs = function(e, t) {
      return Lt.syncMsgs(e, t);
    }),
    (e.getC2CHistoryMsgs = function(e, t, n) {
      return Lt.getC2CHistoryMsgs(e, t, n);
    }),
    (e.syncGroupMsgs = function(e, t, n) {
      return Lt.syncGroupMsgs(e, t, n);
    }),
    (e.c2CMsgReaded = function(e, t, n) {
      return bt.c2CMsgReaded(e, t, n);
    }),
    (e.groupMsgReaded = function(e, t, n) {
      return ut(e, t, n);
    }),
    (e.setAutoRead = function(e, t, n) {
      return bt.setAutoRead(e, t, n);
    }),
    (e.createGroup = function(e, t, n) {
      return we(e, t, n);
    }),
    (e.createGroupHigh = function(e, t, n) {
      return De(e, t, n);
    }),
    (e.applyJoinGroup = function(e, t, n) {
      return qe(e, t, n);
    }),
    (e.handleApplyJoinGroupPendency = function(e, t, n) {
      return xe(e, t, n);
    }),
    (e.getPendencyGroup = function(e, t, n) {
      return Ke(e, t, n);
    }),
    (e.getPendencyGroupRead = function(e, t, n) {
      return He(e, t, n);
    }),
    (e.handleInviteJoinGroupRequest = function(e, t, n) {
      return Ve(e, t, n);
    }),
    (e.deleteApplyJoinGroupPendency = function(e, t, n) {
      return Le(e, t, n);
    }),
    (e.quitGroup = function(e, t, n) {
      return Je(e, t, n);
    }),
    (e.searchGroupByName = function(e, t, n) {
      return Ye(e, t, n);
    }),
    (e.getGroupPublicInfo = function(e, t, n) {
      return Xe(e, t, n);
    }),
    (e.getGroupInfo = function(e, t, n) {
      return je(e, t, n);
    }),
    (e.modifyGroupBaseInfo = function(e, t, n) {
      return ke(e, t, n);
    }),
    (e.getGroupMemberInfo = function(e, t, n) {
      return We(e, t, n);
    }),
    (e.addGroupMember = function(e, t, n) {
      return Qe(e, t, n);
    }),
    (e.modifyGroupMember = function(e, t, n) {
      return Ze(e, t, n);
    }),
    (e.deleteGroupMember = function(e, t, n) {
      return $e(e, t, n);
    }),
    (e.destroyGroup = function(e, t, n) {
      return et(e, t, n);
    }),
    (e.changeGroupOwner = function(e, t, n) {
      return tt(e, t, n);
    }),
    (e.getJoinedGroupListHigh = function(e, t, n) {
      return nt(e, t, n);
    }),
    (e.getRoleInGroup = function(e, t, n) {
      return ot(e, t, n);
    }),
    (e.forbidSendMsg = function(e, t, n) {
      return it(e, t, n);
    }),
    (e.sendCustomGroupNotify = function(e, t, n) {
      return rt(e, t, n);
    }),
    (e.applyJoinBigGroup = function(e, t, n) {
      return Be(e, t, n);
    }),
    (e.quitBigGroup = function(e, t, n) {
      return ze(e, t, n);
    }),
    (e.getProfilePortrait = function(e, t, n) {
      return It(e, t, n);
    }),
    (e.setProfilePortrait = function(e, t, n) {
      return Et(e, t, n);
    }),
    (e.applyAddFriend = function(e, t, n) {
      return ct(e, t, n);
    }),
    (e.getPendency = function(e, t, n) {
      return ft(e, t, n);
    }),
    (e.getPendencyReport = function(e, t, n) {
      return gt(e, t, n);
    }),
    (e.deletePendency = function(e, t, n) {
      return dt(e, t, n);
    }),
    (e.responseFriend = function(e, t, n) {
      return mt(e, t, n);
    }),
    (e.getAllFriend = function(e, t, n) {
      return ht(e, t, n);
    }),
    (e.deleteChat = function(e, t, n) {
      return pt(e, t, n);
    }),
    (e.deleteFriend = function(e, t, n) {
      return lt(e, t, n);
    }),
    (e.addBlackList = function(e, t, n) {
      return Mt(e, t, n);
    }),
    (e.deleteBlackList = function(e, t, n) {
      return _t(e, t, n);
    }),
    (e.getBlackList = function(e, t, n) {
      return yt(e, t, n);
    }),
    (e.getRecentContactList = function(e, t, n) {
      return Tt(e, t, n);
    }),
    (e.uploadFile = e.uploadPic = function(e, t, n) {
      return Ut.uploadFile(e, t, n);
    }),
    (e.submitUploadFileForm = function(e, t, n) {
      return Ut.submitUploadFileForm(e, t, n);
    }),
    (e.uploadFileByBase64 = e.uploadPicByBase64 = function(e, t, n) {
      var o = {
        To_Account: e.toAccount,
        Busi_Id: e.businessType,
        File_Type: e.File_Type,
        File_Str_Md5: e.fileMd5,
        PkgFlag: h.BASE64_DATA,
        File_Size: e.totalSize,
        Slice_Offset: 0,
        Slice_Size: e.totalSize,
        Slice_Data: e.base64Str,
        Seq: le(),
        Timestamp: ce(),
        Random: pe(),
      };
      return Ct(o, t, n);
    }),
    (e.setJsonpLastRspData = function(e) {
      H = "string" == typeof e ? JSON.parse(e) : e;
    }),
    (e.getLongPollingId = function(e, t, n) {
      return vt(0, t, n);
    }),
    (e.applyDownload = function(e, t, n) {
      return Ot(e, t, n);
    }),
    (e.onDownFile = function(e) {
      window.open(ie.downloadMap["uuid_" + e]);
    }),
    (e.checkLogin = function(e, t) {
      return he(e, t);
    });
})(webim);
